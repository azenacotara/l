(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6240],{30186:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[username]",function(){return a(3868)}])},86202:function(e,r,a){"use strict";a.d(r,{h:function(){return s}});var t=a(52322);let s=e=>{let{ldJsonSchema:r}=e;return(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(r).replace(/\//g,"\\/")}})}},18363:function(e,r,a){"use strict";a.d(r,{f:function(){return u},m:function(){return m}});var t=a(52322),s=a(35206),n=a(92599),l=a(93326),i=a(3927),o=a(92488),c=a(10386),d=a(15584);let u=e=>{let{report:r,showText:a,className:s,variant:i}=e,{t:d}=(0,c.$G)();return(0,t.jsxs)(l.zx,{variant:i||"outline",isIconOnly:!a,className:s,"aria-label":d("Common.report"),onPress:()=>{o.Nd.value=!0,o.hl.value=r},children:[!!a&&d("Common.report"),(0,t.jsx)(n.cWE,{className:"size-4"})]})};function m(e){let{referrer:r}=e,a=(0,d.BF)(o.Nd),{t:n}=(0,c.$G)(),l=(0,d.BF)(o.hl);return(0,t.jsx)(i.Vq,{open:a,onOpenChange:e=>{o.Nd.value=e},analyticsProps:{referrer:r,type:"ReportDialog"},children:!!l&&(0,t.jsx)(s.o,{isOpen:a,title:n("Common.report"),report:l,onComplete:()=>{o.Nd.value=!1,o.hl.value=void 0}})})}},76843:function(e,r,a){"use strict";a.d(r,{w:function(){return f}});var t=a(52322),s=a(35981),n=a(93326),l=a(61676),i=a(2784),o=a(10386),c=a(37940),d=a(35740),u=a(38738),m=a(95856);function p(e){var r,a;let{persona:s}=e,{participant__name:n,avatar_file_name:l}=s,i=(0,d.a)().user,{data:o}=(0,u.xS)(null!==(a=null==i?void 0:null===(r=i.user)||void 0===r?void 0:r.username)&&void 0!==a?a:"",!1);return(0,t.jsx)(m.B7,{...e,src:l||(null==o?void 0:o.avatar_file_name),name:n})}function f(e){let{persona:r,isDefault:a,handleItemClick:d,handleEditClick:u,selected:m,menuOptions:f,avatarSize:h,...x}=e,{t:v}=(0,o.$G)(),[g,j]=(0,i.useState)(!1),{participant__name:b,definition:w}=r;return(0,t.jsxs)("div",{className:(0,l.cn)("my-1 flex w-full h-fit group flex-row gap-3 p-2 items-center rounded-spacing-xs text-primary hover:cursor-pointer",u&&(a||m)?"bg-accent":"bg-transparent",u?"hover:bg-accent":"hover:bg-surface-elevation-3"),onClick:()=>d&&d(),...x,children:[(0,t.jsx)(p,{persona:r,size:null!=h?h:40,circle:!0}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col w-full max-w-full justify-center",children:[(0,t.jsxs)("div",{className:"flex flex-1 gap-2 items-center",children:[(0,t.jsx)("p",{className:"line-clamp-1 text-ellipsis break-anywhere text-md sm:text-lg",children:b}),!!(a||m)&&(0,t.jsx)("p",{className:"text-blue text-md sm:text-lg",children:v(a?"Common.default":"Common.active")})]}),(0,t.jsx)("p",{className:"text-left text-sm sm:text-md mb-1 line-clamp-1 text-ellipsis break-anywhere text-muted-foreground",children:w})]}),!!u&&(0,t.jsx)(n.zx,{onPress:()=>{u&&u()},className:"hidden group-hover:block",variant:"primary",preventDefault:!0,children:v("Common.edit")}),!!f&&f.length>0&&(0,t.jsx)("div",{className:"z-50",children:(0,t.jsx)(s.C,{options:f,setIsOpen:j,isOpen:g,asChild:!0,children:(0,t.jsx)(n.zx,{variant:"ghost",isIconOnly:!0,preventDefault:!0,onPress:()=>j(!g),children:(0,t.jsx)(c.evw,{})})})})]})}},46600:function(e,r,a){"use strict";a.d(r,{$u:function(){return c},es:function(){return i},j$:function(){return o}});var t=a(3048),s=a(38694),n=a(24991),l=a(30195);let i=e=>{let r=e?t.Fx:t.fY;return l.z.object({name:l.z.string().min(t.S1).max(t.vl).regex(s.vk,(0,n.t)("Form.invalid-characters")),definition:l.z.string().max(r,"Definition cannot be longer than ".concat(r," characters")),avatar_rel_path:l.z.string().optional(),enabled:l.z.boolean()})},o={external_id:"new",name:"",participant__name:"",definition:""},c=(e,r,a)=>{var t,s;let n=(null==a?void 0:null===(t=a.personaOverrides)||void 0===t?void 0:t[r])===e,l=(null==a?void 0:null===(s=a.personaOverrides)||void 0===s?void 0:s[r])===void 0,i=(null==a?void 0:a.default_persona_id)===e&&l;return n||i}},45736:function(e,r,a){"use strict";a.d(r,{X:function(){return o}});var t=a(52322),s=a(29338),n=a(2784),l=a(92599),i=a(61676);let o=n.forwardRef((e,r)=>{let{className:a,...n}=e;return(0,t.jsx)(s.fC,{ref:r,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-spacing-xxs border border-primary disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...n,children:(0,t.jsx)(s.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.KML,{className:"h-2 w-2"})})})});o.displayName=s.fC.displayName},36484:function(e,r,a){"use strict";a.d(r,{h:function(){return i}});var t=a(52322),s=a(45736),n=a(39452),l=a(80113);function i(e){let{name:r,label:a,isReversed:i}=e;return(0,t.jsx)(n.Wi,{name:r,render:e=>{let{field:r}=e,o=i?!r.value:!!r.value;return(0,t.jsxs)(n.xJ,{className:"flex items-center gap-2",children:[(0,t.jsx)(s.X,{className:"bg-surface-elevation-3 mt-2",...r,checked:o,onCheckedChange:()=>r.onChange(!r.value)}),(0,t.jsx)("div",{onClick:()=>!r.disabled&&r.onChange(!r.value),children:(0,t.jsx)("label",{htmlFor:r.name,className:(0,l.cn)(r.disabled?"text-muted-foreground":"hover:cursor-pointer"),children:a})})]})}})}},20606:function(e,r,a){"use strict";a.d(r,{E:function(){return i}});var t=a(52322),s=a(54835),n=a(2784),l=a(61676);let i=n.forwardRef((e,r)=>{let{className:a,value:n,...i}=e;return(0,t.jsx)(s.fC,{ref:r,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...i,children:(0,t.jsx)(s.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});i.displayName=s.fC.displayName},91724:function(e,r,a){"use strict";a.d(r,{Y:function(){return h},Zo:function(){return s},bR:function(){return x}});var t,s,n=a(35740),l=a(55264),i=a(79937),o=a(85108),c=a(5632),d=a(2784),u=a(30195);(t=s||(s={})).Characters="characters",t.Liked="liked",t.Voices="voices",t.Personas="personas";let m="characters",p=u.z.object({username:u.z.string(),tab:u.z.string()}).partial(),f=e=>e&&Object.values(s).includes(e)?e:m,h=e=>{let r=(0,c.useRouter)(),a=p.safeParse(r.query),{tab:t}=a.success?a.data:{tab:m},[s,n]=(0,d.useState)(f(t));return{selectedTab:s,handleTabChange:a=>{let t=f(a);n(t),r.replace(l.nN.profile(e,t),void 0,{shallow:!0})}}},x=()=>{var e;let{user:r}=(0,n.a)();return(0,o.a)({queryKey:["publicUser",null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.username],queryFn:()=>(0,i.m)().fetchCharactersCreatedByUser(),select:e=>(null==e?void 0:e.characters)||[]})}},3868:function(e,r,a){"use strict";a.r(r),a.d(r,{__N_SSP:function(){return eH},default:function(){return eY},runtime:function(){return eW}});var t,s,n,l,i=a(52322),o=a(30597),c=a(34318),d=a(55264),u=a(21236),m=a(6669),p=a(50567),f=a(92197),h=a(77009),x=a(18363),v=a(72539),g=a(93326),j=a(92599),b=a(80729),w=a(35740),y=a(60466),N=a(91724),_=a(92488),P=a(61676),C=a(66149),k=a(86202),S=a(97729),O=a.n(S),F=a(10386);let E=e=>{let{name:r,username:a,description:t}=e,{t:s}=(0,F.$G)(),n=(0,d.C3)("".concat(r," (@").concat(a,")")),l="https://character.ai"+d.nN.profileOGImage(a),o={"@context":"https://schema.org","@type":"Person",name:r,alternateName:"@".concat(a),description:t||s("Pages.descriptions.profileDefault",{name:r}),image:l,url:"https://character.ai/profile/".concat(a)};return(0,i.jsxs)(O(),{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("meta",{name:"description",content:t||s("Pages.descriptions.profileDefault",{name:r})},"description"),(0,i.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,i.jsx)("meta",{property:"og:title",content:n},"og:title"),(0,i.jsx)("meta",{property:"og:description",content:t||s("Pages.descriptions.profileDefault",{name:r})},"og:description"),(0,i.jsx)("meta",{property:"og:image",content:l},"og:image"),(0,i.jsx)(k.h,{ldJsonSchema:o})]})};var U=a(16994),z=a(16981),I=a(24497),L=a(34581);function T(){return(0,i.jsxs)("div",{className:"px-3 py-2 gap-3 flex items-center",children:[(0,i.jsx)(L.O,{className:"w-16 h-16 rounded-spacing-xs"}),(0,i.jsxs)("div",{className:"grow flex flex-col gap-3",children:[(0,i.jsx)(L.O,{className:"h-5 w-24 sm:w-16"}),(0,i.jsx)(L.O,{className:"h-5 w-full"})]})]})}function D(e){let{voice:r,onClickDetailView:a}=e,t="private"===r.visibility;return(0,i.jsxs)("div",{className:"px-3 py-2 gap-3 flex items-center hover:bg-surface-elevation-3 hover:rounded-spacing-xs",children:[(0,i.jsx)(I.K,{id:r.id,className:"w-16 h-16 shrink-0"}),(0,i.jsxs)(g.zx,{onPress:a,className:"grow flex-col bg-transparent rounded-none items-start p-0 h-full text-md text-muted-foreground whitespace-normal gap-1",disableRipple:!0,children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 text-foreground",children:[(0,i.jsx)("p",{className:"line-clamp-1",children:r.name}),!!t&&(0,i.jsx)(j.mBM,{className:"size-4 min-w-4"})]}),!!r.description&&(0,i.jsx)("p",{className:"line-clamp-2 text-left",children:r.description})]})]})}var M=a(5632),R=a(76330);let V=e=>{let{thisUsername:r,thisIsMe:a,referrer:t,voices:s,isLoading:n,isError:l,refetch:o}=e,{t:c}=(0,F.$G)(),u=(0,M.useRouter)();if(n)return(0,i.jsx)("div",{className:"grid sm:grid-cols-2 gap-2 w-full sm:w-[540px] mt-1 mb-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,i.jsx)(T,{},r))});if(l)return(0,i.jsx)(U.o,{refresh:o});let m=d.nN.voice();return(0,i.jsxs)(i.Fragment,{children:[(!s||0===s.length)&&(0,i.jsx)("div",{className:"flex w-full justify-center my-4",children:c(a?"Profile.create-a-voice":"Profile.no-voices")}),!!s&&s.length>0&&(0,i.jsx)("div",{className:"grid sm:grid-cols-2 gap-2 w-full sm:w-[540px] mt-1 mb-4",children:s.map(e=>(0,i.jsx)(D,{voice:e,onClickDetailView:()=>{u.replace(d.nN.profile(r,N.Zo.Voices,{voiceId:e.id}),void 0,{shallow:!0})}},e.id))}),!!a&&(0,i.jsx)("div",{className:"flex w-full justify-center",children:(0,i.jsxs)(g.zx,{className:"flex gap-1 bg-brand-bg",color:"secondary",as:z.rU,href:m,analytics:{name:"linkHandled",properties:{link:m,referrer:t}},children:[(0,i.jsx)(R.wEH,{}),c("Common.new")]})})]})};var q=a(84938);function G(e){var r;let{publicUser:a}=e,{user:t}=(0,w.a)(),s=null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.username,n=s===a.username,{voices:l,isLoading:o,isError:c,refetch:d}=(0,q.f$)(n),{searchResults:u,isLoading:m,isError:p,refetch:f}=(0,q.Nu)(null==a?void 0:a.username,n);return n?(0,i.jsx)(V,{thisUsername:s,thisIsMe:n,referrer:"Profile: Voices Tab",voices:l,isLoading:o,isError:c,refetch:d}):(0,i.jsx)(V,{thisUsername:a.username,thisIsMe:n,referrer:"Profile: Voices Tab",voices:u,isLoading:m,isError:p,refetch:f})}var $=a(38738),A=a(70393),K=a(83614),B=a(2784),Q=a(63881),Z=a(54770);let H=B.forwardRef((e,r)=>{let{option:a,isSelected:t,handlePress:s}=e;return(0,i.jsx)(g.zx,{ref:r,className:"w-full flex justify-between bg-transparent hover:bg-[--transparency-4] text-primary rounded-spacing-xs",variant:"ghost",endContent:t?(0,i.jsx)(j.KML,{height:"16px"}):void 0,onPress:s,children:a})});H.displayName="OptionButton";var W=a(73210),X=a(35981),Y=a(38978);let J=(e,r)=>{let a=(0,B.useMemo)(()=>null==e?void 0:e.map(e=>e.external_id),[e]),{isLoading:t,data:s}=(0,Y.ph)(a,r),{charactersWithTags:n,tags:l}=(0,B.useMemo)(()=>{let r=null==s?void 0:s.ranked_tags,a=null==s?void 0:s.character_id_to_tags;if(t||!a||!r)return{charactersWithTags:e,tags:[]};let n=r.reduce((e,r)=>(e[r.tag_id]=r,e),{});return{charactersWithTags:null==e?void 0:e.map(e=>{let r=a[e.external_id];return r?{...e,tags:r.map(e=>n[e]).filter(e=>void 0!==e)}:e}),tags:r}},[e,s,t]);return{charactersWithTags:n,tags:l}};var ee=a(70677);(t=n||(n={})).Alphabetical="Alphabetical",t.MostChats="MostChats",t.MostLikes="MostLikes",(s=l||(l={})).All="ALL",s.Public="PUBLIC",s.Unlisted="UNLISTED",s.Private="PRIVATE";let er={PUBLIC:ee.pA.PUBLIC,UNLISTED:ee.pA.UNLISTED,PRIVATE:ee.pA.PRIVATE},ea=(e,r)=>"ALL"===r?e:e.filter(e=>e.visibility===er[r]),et=(e,r)=>r.length?e.filter(e=>{var a;return null===(a=e.tags)||void 0===a?void 0:a.some(e=>r.some(r=>r.tag_id===e.tag_id))}):e,es=(e,r,a,t,s)=>{if(!e)return e;let n=[...e];switch(r){case"Alphabetical":n.sort((e,r)=>{var a,t;return(null!==(a=e.participant__name)&&void 0!==a?a:"").localeCompare(null!==(t=r.participant__name)&&void 0!==t?t:"")});break;case"MostChats":n.sort((e,r)=>{var a,t;return Number(null!==(a=r.participant__num_interactions)&&void 0!==a?a:0)-Number(null!==(t=e.participant__num_interactions)&&void 0!==t?t:0)});break;case"MostLikes":n.sort((e,r)=>{var a,t;return Number(null!==(a=r.upvotes)&&void 0!==a?a:0)-Number(null!==(t=e.upvotes)&&void 0!==t?t:0)})}return s?et(n,t):ea(n,a)};var en=a(75257);let el=e=>{let{selectedOption:r,setSelectedOption:a,referrer:t,thisUsername:s}=e,{t:l}=(0,F.$G)(),[o,c]=(0,B.useState)(!1),d=(0,B.useMemo)(()=>Object.keys(n).map(e=>({content:(0,i.jsx)(H,{option:l("Profile.SortOption.".concat(e)),isSelected:r===e,handlePress:()=>{a(e),c(!1),u.iN.elementClicked({type:"SortOptionButton",referrer:t,thisUsername:s,option:e})}}),asChild:!0,key:e})),[l,r,t,s,a,c]);return(0,i.jsx)(X.C,{options:d,setIsOpen:c,isOpen:o,triggerClassName:"opacity-100",asChild:!0,children:(0,i.jsx)(g.zx,{variant:"ghost",color:"secondary",className:"rounded-spacing-s w-fit text-primary",preventDefault:!0,onPress:()=>c(!o),endContent:(0,i.jsx)(j.v4q,{height:"12px"}),children:l("Profile.SortOption.".concat(r))})})},ei=e=>{let{characters:r,selectedOption:a,setSelectedOption:t,referrer:s,thisUsername:n}=e,[o,c]=(0,B.useState)(!1),{t:d}=(0,F.$G)(),{availableFilterOptions:m,showFilterOptions:p}=(0,B.useMemo)(()=>{let e=!1,a=[l.All];return(null==r?void 0:r.some(e=>"PUBLIC"===e.visibility))&&a.push(l.Public),(null==r?void 0:r.some(e=>"UNLISTED"===e.visibility))&&(a.push(l.Unlisted),e=!0),(null==r?void 0:r.some(e=>"PRIVATE"===e.visibility))&&(a.push(l.Private),e=!0),{availableFilterOptions:a,showFilterOptions:e}},[r]),f=(0,B.useMemo)(()=>m.map(e=>({content:(0,i.jsx)(H,{option:d("Profile.FilterOption.".concat(e)),isSelected:a===e,handlePress:()=>{t(e),c(!1),u.iN.elementClicked({type:"FilterOptionButton",referrer:s,thisUsername:n,option:e})}}),asChild:!0,key:e})),[d,a,t,s,n,m]);return p?(0,i.jsx)(X.C,{options:f,setIsOpen:c,isOpen:o,triggerClassName:"opacity-100",asChild:!0,children:(0,i.jsx)(g.zx,{variant:"ghost",color:"secondary",className:"rounded-spacing-s w-fit text-primary",preventDefault:!0,onPress:()=>c(!o),endContent:(0,i.jsx)(j.v4q,{height:"12px"}),children:d("Profile.FilterOption.".concat(a))})}):null},eo=e=>{let{tags:r,selectedOption:a,setSelectedOption:t,referrer:s,thisUsername:n}=e,{t:l}=(0,F.$G)(),[o,c]=(0,B.useState)(!1),d=(0,B.useRef)(null);if((0,en.Z)(d,()=>{c(!1)}),(0,B.useEffect)(()=>{o&&u.iN.contentViewed({component:"TagFilterDropdown",referrer:s})},[o,s]),!(null==r?void 0:r.length))return null;let m=l("Profile.Tags");switch(a.length){case 0:m=l("Profile.Tags");break;case 1:m=a[0].display_name;break;default:m="".concat(a[0].display_name,", +").concat(a.length-1)}return(0,i.jsxs)(W.h_,{open:o,onOpenChange:c,children:[(0,i.jsx)(W.$F,{className:"opacity-100",asChild:!0,children:(0,i.jsx)(g.zx,{variant:"ghost",color:"secondary",className:"rounded-spacing-s w-fit text-primary",endContent:(0,i.jsx)(j.v4q,{height:"12px"}),onPress:()=>c(!o),children:m})}),(0,i.jsx)(W.AW,{ref:d,side:"bottom",align:"end",className:(0,P.cn)("flex flex-col rounded-spacing-m overflow-hidden shadow-md p-1 max-w-[300px]"),children:(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("span",{className:"flex justify-start px-[14px] pt-3 text-muted-foreground text-md leading-4",children:l("Profile.Filter")}),(0,i.jsx)("div",{className:"flex items-center justify-start p-3 gap-2 flex-wrap",children:r.map(e=>(0,i.jsx)(g.zx,{variant:a.includes(e)?"primary":"outline",className:(0,P.cn)("rounded-full px-4 py-2 text-[14px] font-normal font-medium",a.includes(e)?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),onPress:()=>{let r=a.indexOf(e),l=[...a];-1===r?l.push(e):l.splice(r,1),t(l),u.iN.elementClicked({type:"TagFilterButton",value:e.tag_id,referrer:s,thisUsername:n})},children:e.display_name},e.tag_id))})]})})]})},ec=e=>{let{characters:r,noCharacterText:a,thisUsername:t,referrer:s,hideAuthor:o,useTags:c=!1}=e,[d,u]=(0,B.useState)(l.All),[m,f]=(0,B.useState)(n.MostChats),[h,x]=(0,B.useState)([]),v=(0,K.useGateValue)(p.F5.CreatorProfileTags),{charactersWithTags:g,tags:j}=J(null!=r?r:[],v),b=g.length<=1,w=(0,B.useMemo)(()=>es(null!=g?g:[],m,d,h,c),[g,m,d,h,c]);return(null==w?void 0:w.length)?(0,i.jsxs)("div",{className:"w-full",children:[!b&&(0,i.jsxs)("div",{className:"flex justify-between w-full",children:[(0,i.jsx)(el,{selectedOption:m,setSelectedOption:f,referrer:s,thisUsername:t}),c&&v?(0,i.jsx)(eo,{tags:j,selectedOption:h,setSelectedOption:x,referrer:s,thisUsername:t}):(0,i.jsx)(ei,{characters:r,selectedOption:d,setSelectedOption:u,referrer:s,thisUsername:t})]}),w.map(e=>(0,i.jsx)(Z.u,{referrer:s,character:e,optionsProps:{thisIsMyCharacter:e.user__username===t,showVisibility:!0},hideAuthor:o,clickableAuthor:!1},e.external_id))]}):(0,i.jsx)("span",{children:a})};var ed=a(45346);let eu=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=arguments.length>2?arguments[2]:void 0,{data:t,isLoading:s}=(0,$.bu)(!!e&&r,a);return{isLoading:s,isFollowing:!!e&&!!r&&(null!=t?t:[]).includes(e)}};var em=a(66514);function ep(e){let{username:r,requesterUsername:a}=e,{user:t}=(0,w.a)(),{t:s}=(0,F.$G)(),n=(0,em.NL)(),{withRecaptchaHeaders:l,isRecaptchaUpdating:o}=(0,ed.jW)({action:"get_user_following"}),{isFollowing:c}=eu(r,!!t&&!o,{getHeaders:l}),d=(0,$.Os)(),m=(0,$.hO)(),p=e=>void n.invalidateQueries([$.Sz.publicUser(e)]),f=async()=>{a&&(c?(u.iN.userSocialAction({referrer:"FollowButton",type:"unfollow"}),m.mutate({username:r,requesterUsername:a},{onSuccess:()=>p(a)})):(u.iN.userSocialAction({referrer:"FollowButton",type:"follow"}),d.mutate({username:r,requesterUsername:a},{onSuccess:()=>p(a)})))};return(0,i.jsx)(g.zx,{onPress:f,preventDefault:!0,isDisabled:!a,variant:c?"ghost":"primary",className:c?"bg-surface-elevation-2 hover:bg-surface-elevation-3":"",children:s(c?"Profile.followButtonFollowing":"Profile.followButton")})}var ef=a(3927),eh=a(31396);function ex(e){var r;let{user:a,hideRelationship:t,handleClick:s,className:n,rightContent:l}=e,o=(0,w.a)().user,{username:c,account__avatar_file_name:u,account__bio:m}=a;return(0,i.jsxs)(g.zx,{variant:"ghost",as:z.rU,href:d.nN.profile(a.username),analytics:{name:"pageViewed",properties:{page_name:"Profile",referrer:"UserListItemSocial",username:a.username}},className:(0,P.cn)("h-fit flex w-full flex-row justify-between items-center rounded-spacing-xs p-2 gap-3",n),onPress:()=>setTimeout(()=>null==s?void 0:s()),children:[(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(v.a,{name:c||"",size:40,src:u,rounded:!0})}),(0,i.jsxs)("div",{className:"flex flex-1 min-w-0 flex-col justify-center pr-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-md truncate",children:a.username}),!!m&&(0,i.jsx)("p",{className:"text-md truncate text-muted-foreground",children:m})]}),!t&&(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(ep,{username:a.username,requesterUsername:null==o?void 0:null===(r=o.user)||void 0===r?void 0:r.username})}),l]})}var ev=a(20606),eg=a(93808);function ej(e){let{users:r,hasNextPage:a,fetchNextPage:t,hideRelationship:s,handleItemClick:n}=e,{user:l}=(0,w.a)();return(0,i.jsx)("div",{className:"overflow-y-auto h-full",style:{scrollbarGutter:"stable both-edges"},id:"scrollableDiv",children:(0,i.jsx)(eg.Z,{scrollableTarget:"scrollableDiv",dataLength:r.length,next:t,hasMore:a,loader:(0,i.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,i.jsx)(ev.E,{})}),className:"flex w-full flex-col items-start gap-1",children:(null!=r?r:[]).map(e=>{var r;return(0,i.jsx)(ex,{user:e,hideRelationship:s||e.username===(null==l?void 0:null===(r=l.user)||void 0===r?void 0:r.username),handleClick:n},e.username)})})})}function eb(e){var r,a,t;let{creator:s,thisIsMe:n,allowOpen:l=!0,startOpen:o=!1}=e,[c,u]=(0,B.useState)(o),{t:m}=(0,F.$G)(),[p,f]=(0,B.useState)("followers"),{user:h}=(0,w.a)(),x=e=>{f(e),l&&u(!0)};return(0,i.jsxs)(ef.Vq,{open:c,onOpenChange:u,analyticsProps:{referrer:"Profile",type:"FollowerDialog"},children:[(0,i.jsx)(ef.hg,{asChild:!0,disabled:!h,onClick:e=>e.preventDefault(),children:(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,i.jsx)(g.zx,{variant:"ghost",isDisabled:!h,className:"px-0 text-muted-foreground hover:bg-transparent opacity-100",onPress:()=>x("followers"),children:m("Profile.num-followers",{count:null!==(r=s.num_followers)&&void 0!==r?r:0,formatted:d.Wj.formatNumber(null!==(a=s.num_followers)&&void 0!==a?a:0)})}),(0,i.jsx)("span",{children:"•"}),(0,i.jsx)(g.zx,{variant:"ghost",isDisabled:!h,className:"px-0 text-muted-foreground hover:bg-transparent opacity-100",onPress:()=>x("following"),children:m("Profile.num_following",{formatted:d.Wj.formatNumber(null!==(t=s.num_following)&&void 0!==t?t:0)})})]})}),(0,i.jsx)(ef.cZ,{className:"w-full sm:w-[480px] h-[calc(100vh-20vh)] pt-4 overflow-y-hidden px-3",hideClose:!0,children:(0,i.jsx)(b.mQ,{defaultValue:p,className:"flex flex-col items-center h-full overflow-y-hidden",tabIndex:-1,children:!!h&&!!c&&(0,i.jsx)(ew,{creator:s,thisIsMe:n,closeDialog:()=>u(!1)})})})]})}function ew(e){var r,a,t;let{creator:s,thisIsMe:n,closeDialog:l}=e,{t:o}=(0,F.$G)(),{username:c}=s,{users:u,hasNextPage:m,fetchNextPage:p}=(0,$.qY)(c),{users:f,hasNextPage:h,fetchNextPage:x}=(0,$.Ft)(c);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(b.dr,{className:"sticky top-0 w-full bg-popover z-10 py-6",children:[(0,i.jsxs)(ef.GG,{className:"absolute right-1 top-0",children:[(0,i.jsx)(eh.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:o("Common.close")})]}),(0,i.jsx)(b.SP,{value:"followers",children:o("Profile.followers_num",{count:null!==(r=s.num_followers)&&void 0!==r?r:0,formatted:d.Wj.formatNumber(null!==(a=s.num_followers)&&void 0!==a?a:0)})}),(0,i.jsx)(b.SP,{value:"following",children:o("Profile.following_num",{count:s.num_following,formatted:d.Wj.formatNumber(null!==(t=s.num_following)&&void 0!==t?t:0)})})]}),!!u&&!!p&&(0,i.jsx)(b.nU,{value:"followers",className:"w-full h-full overflow-y-hidden",children:(0,i.jsx)(ej,{users:u,hasNextPage:!!m,fetchNextPage:p,handleItemClick:l})}),!!f&&!!x&&(0,i.jsx)(b.nU,{value:"following",className:"w-full h-full overflow-y-hidden",children:(0,i.jsx)(ej,{users:f,hasNextPage:!!h,fetchNextPage:x,hideRelationship:n,handleItemClick:l})})]})}var ey=a(9010),eN=a(46600),e_=a(3048),eP=a(93033),eC=a(76843),ek=a(83944),eS=a(48364),eO=a(2608);let eF=e=>[e_.x0,e_.Kf,e_.mO].includes(null!=e?e:""),eE=e=>{let{name:r,definition:a=""}=e;return{...e,name:r.trim(),definition:null==a?void 0:a.trim()}},eU=e=>{let{persona:r,settings:a,onSuccessCallback:t,isPlus:s}=e,{t:n}=(0,F.$G)(),l=(0,B.useMemo)(()=>{var e,t;let s=a.default_persona_id===r.external_id&&!!r&&!!a.default_persona_id;return{name:null!==(e=r.participant__name)&&void 0!==e?e:"",definition:null!==(t=r.definition)&&void 0!==t?t:"",avatar_rel_path:r.avatar_file_name,enabled:!!s}},[a.default_persona_id,r]),{mutate:i,isLoading:o}=(0,e_.Fi)(),{mutate:c,isLoading:d}=(0,e_._M)(r),{mutate:m,isLoading:p}=(0,eP.pC)(),f=(0,B.useCallback)(()=>{u.iN.personaUpdated({referrer:"persona_hook",type:"create"}),(0,eO.K)(n("Persona.create-persona-success"))},[n]),h=(0,B.useCallback)((e,r)=>{var a;if("delete"===r){(0,eO.K)(n("Persona.failed-to-delete-persona"),void 0,"destructive"),(0,eS.H)("Failed to delete persona",{error:e});return}eF(null!==(a=null==e?void 0:e.message)&&void 0!==a?a:"")?(0,eO.K)(n("Persona.".concat(e.message)).toString(),void 0,"destructive"):["Property exceeds max length or has invalid characters","Character property exceeds max length or has invalid characters"].includes(e)?(0,eO.K)(n("Persona.failed-to-create-invalid-characters-persona"),void 0,"destructive"):(0,eO.K)(n("Persona.failed-to-".concat(r,"-persona")).toString(),void 0,"destructive"),(0,eS.H)("Failed to ".concat(r," persona"),{error:e})},[n]),x=(0,B.useCallback)(e=>{let r=e.archived;r?u.iN.personaUpdated({referrer:"persona_hook",type:"delete"}):u.iN.personaUpdated({referrer:"persona_hook",type:"update",changes:e}),(0,eO.K)(r?n("Persona.remove-persona-success"):n("Persona.update-persona-success"))},[n]),v=(0,B.useCallback)((e,r)=>{u.iN.settingChanged({setting:"persona_enabled",referrer:"persona_hook",value:e&&!r}),ek.w.setUserProperty("enabled_persona",e&&!r)},[]),g=(0,B.useCallback)(async(e,s,l)=>{var i,o;let c=null!==(i=a.personaOverrides)&&void 0!==i?i:{},d="delete"===s,u=a.default_persona_id===e,p=Object.values(c).includes(e);if(!d||u||p){let i={...a,default_persona_id:l?e:""};if(d){let e=Object.entries({...c}).reduce((e,a)=>{let[t,s]=a;return s!==r.external_id&&(e[t]=s),e},{});i={...a,default_persona_id:u?"":null!==(o=a.default_persona_id)&&void 0!==o?o:"",personaOverrides:e}}m(i,{onSuccess:async()=>{v(l,d),(0,eO.K)("create"===s?n("Persona.create-persona-success"):n("Persona.update-persona-success")),t()},onError:e=>{(0,eO.K)(n("Persona.failed-to-enable-disable-persona",{action:l?"enable":"disable"}).toString(),void 0,"destructive"),(0,eS.H)("Failed to enable/disable persona",{error:e})}})}else(0,eO.K)(n("Persona.remove-persona-success")),t()},[t,v,r.external_id,a,n,m]),j=(0,B.useCallback)(async(e,r,a,s)=>{let i=l.enabled!==a;if(!s||!s.persona||(null==s?void 0:s.status)==="NOT_OK"){var o;h(null!==(o=null==s?void 0:s.error)&&void 0!==o?o:"Failed to ".concat(e," your persona"),e);return}i||"delete"===e?await g(s.persona.external_id,e,a):(r(n),t())},[l.enabled,h,g,n,t]),b=(0,B.useCallback)(async(e,a)=>{let t=eE(e),o=e.enabled,d=["definition","name","avatar_rel_path"].some(e=>l[e]!==t[e]),u=l.enabled!==t.enabled;"create"===a?i({...t,isPlus:s},{onError:e=>h(e,"create"),onSuccess:async e=>j("create",f,o,e)}):d?c({external_id:r.external_id,changes:t,isPlus:s},{onError:e=>h(e,"update"),onSuccess:async e=>j("update",()=>x(t),o,e)}):u?await g(r.external_id,"update",o):(0,eO.K)(n("Persona.failed-to-enable-disable-persona",{action:o?"enable":"disable"}).toString(),void 0,"destructive")},[i,j,g,l,s,f,h,x,r.external_id,n,c]);return{isLoading:o||d||p,initialValues:l,handleDelete:(0,B.useCallback)(()=>{c({external_id:r.external_id,changes:{archived:!0,name:r.participant__name},isPlus:s},{onError:e=>h(e,"delete"),onSuccess:e=>j("delete",()=>x({archived:!0}),a.default_persona_id===r.external_id,e)})},[c,r.external_id,r.participant__name,s,h,j,a.default_persona_id,x]),handleSaveChanges:b}},ez=B.forwardRef((e,r)=>{let{renderTrigger:a,referrer:t,handleRemove:s}=e,{t:n}=(0,F.$G)(),[l,o]=(0,B.useState)(!1);return(0,i.jsxs)(ef.Vq,{open:l,onOpenChange:o,analyticsProps:{referrer:t,type:"RemovePersonaConfirmation"},children:[a(()=>o(!0)),(0,i.jsxs)(ef.cZ,{ref:r,children:[(0,i.jsx)("p",{className:"mt-4",children:n("Persona.are-you-sure-you-want-to-remove")}),(0,i.jsxs)("div",{className:"w-full flex flex-row justify-end gap-2",children:[(0,i.jsx)(g.zx,{variant:"ghost",onPress:()=>o(!1),children:n("Common.cancel")}),(0,i.jsx)(g.zx,{onPress:s,color:"danger",children:n("Common.yes")})]})]})]})});ez.displayName="RemovePersonaConfirmation";let eI=B.forwardRef((e,r)=>{let{label:a,Icon:t,handleClick:s,handleAsyncClick:n}=e;return(0,i.jsxs)(g.zx,{ref:r,className:"w-full flex justify-between bg-transparent hover:bg-[--transparency-4] text-primary rounded-spacing-xs",onPress:async()=>{null==s||s(),await (null==n?void 0:n())},preventDefault:!0,children:[a,(0,i.jsx)(t,{width:"1rem",height:"1rem"})]})});eI.displayName="MenuOption";let eL=e=>{let{handleEdit:r,handleToggleDefault:a,handleDelete:t,isDefault:s,t:n}=e,l=[{content:(0,i.jsx)(eI,{label:n("Common.edit"),Icon:j.dY8,handleClick:r},"option-edit"),asChild:!0,key:"option-edit"},{content:(0,i.jsx)(eI,{label:s?n("Common.clear-default"):n("Common.make-default"),Icon:s?j.nQG:j.gq4,handleAsyncClick:a},"option-default"),asChild:!0,key:"option-default"}];return l.push({content:(0,i.jsx)(ez,{referrer:"PersonaMenuOption",renderTrigger:e=>(0,i.jsx)(eI,{label:n("Form.remove"),Icon:j.XHJ,handleClick:e},"option-remove"),handleRemove:()=>{t()}}),asChild:!0,key:"option-remove"}),l},eT=e=>{let{t:r}=(0,F.$G)();return eL({...e,t:r})};var eD=a(88883),eM=a(82876),eR=a(63955),eV=a(19459),eq=a(36484),eG=a(54972),e$=a(38513),eA=a(39452);function eK(e){let{persona:r,settings:a,dialogTrigger:t,open:s,setOpen:n,handleCloseCallback:l}=e,{t:o}=(0,F.$G)(),c=r.external_id===(null==a?void 0:a.default_persona_id),d=()=>{v.reset(),l(),n(!1)},{isPlusUser:u}=(0,w.a)(),m=(0,eN.es)(u),{isLoading:p,initialValues:f,handleDelete:h,handleSaveChanges:x}=eU({persona:r,settings:null!=a?a:{},onSuccessCallback:d,isPlus:u}),v=(0,eR.cI)({resolver:(0,eD.F)(m),mode:"onChange",defaultValues:f});(0,B.useEffect)(()=>{v.trigger()},[v]),(0,B.useEffect)(()=>{v.reset(f)},[v,f]);let b=(0,B.useMemo)(()=>v.formState.isDirty&&v.formState.isValid,[v.formState.isDirty,v.formState.isValid]),y=async e=>{await x(e,"new"===t?"create":"update")},N=eT({handleEdit:()=>n(!0),handleToggleDefault:async()=>x({...f,enabled:!c},"update"),handleDelete:h,isDefault:c});return(0,i.jsxs)(ef.Vq,{open:s,onOpenChange:()=>{s?d():n(!0)},analyticsProps:{referrer:"Persona",type:"EditablePersonaDialog"},children:["list-item"===t?(0,i.jsx)(eC.w,{persona:r,isDefault:c,menuOptions:N,avatarSize:54,handleItemClick:()=>n(!0)}):(0,i.jsxs)(g.zx,{className:"flex gap-1 bg-brand-bg",color:"secondary",onPress:()=>n(!0),children:[(0,i.jsx)(R.wEH,{}),o("Common.new")]}),(0,i.jsxs)(ef.cZ,{hideClose:!0,className:"w-full sm:w-[640px] max-w-[440px] flex flex-col gap-5",children:[(0,i.jsxs)("div",{className:"w-full flex gap-4 items-center",children:[(0,i.jsxs)(ef.GG,{children:[(0,i.jsx)(eh.Z,{className:"size-4"}),(0,i.jsx)("span",{className:"sr-only",children:o("Common.close")})]}),(0,i.jsx)("p",{children:o("Common.persona")})]}),"new"===t&&(0,i.jsxs)("div",{className:"w-full bg-transparency--4 rounded-spacing-xs p-3 flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,i.jsx)("div",{className:"bg-transparency--4 rounded-full p-2",children:(0,i.jsx)(j.cvK,{width:"1em",height:"1em"})}),(0,i.jsx)("p",{className:"truncate whitespace-normal break-words text-md",children:o("Persona.characters-will-remember")})]}),(0,i.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,i.jsx)("div",{className:"bg-transparency--4 rounded-full p-2",children:(0,i.jsx)(j.IHp,{width:"1em",height:"1em"})}),(0,i.jsx)("p",{className:"truncate whitespace-normal break-words text-md",children:o("Persona.create-multiple-personas-to")})]})]}),(0,i.jsx)(eA.l0,{...v,children:(0,i.jsxs)("form",{onSubmit:v.handleSubmit(y),className:"flex-auto flex flex-col justify-between w-full gap-3",children:[(0,i.jsxs)("div",{className:"w-full flex gap-4 items-center",children:[(0,i.jsx)("div",{className:"w-[320px]",children:(0,i.jsx)(eG.C,{name:"name",checks:(0,eA.XF)(m,"name"),showMaxLengthIndicator:!0})}),(0,i.jsx)("div",{className:"-mt-4",children:(0,i.jsx)(eV.d,{name:"avatar_rel_path",username:r.participant__name,size:60,generationLabel:o("Common.describe-your-image"),referrer:"EditablePersonaDialog"})})]}),(0,i.jsx)(e$.j,{name:"definition",checks:(0,eA.XF)(m,"definition"),showMaxLengthIndicator:!0,label:o("Persona.background"),className:"max-h-40 overflow-auto"}),(0,i.jsx)(eq.h,{name:"enabled",label:o("Persona.make-default-for-new-chats")}),(0,i.jsxs)("div",{className:"flex justify-end mt-4 gap-4 h-10 transition-opacity",children:["new"!==t&&(0,i.jsx)(ez,{referrer:"EditablePersonaDialog",renderTrigger:e=>(0,i.jsx)(g.zx,{type:"button",className:"text-error",variant:"ghost",disabled:p,onPress:e,children:o("Form.remove")}),handleRemove:()=>{h(),d()}}),(0,i.jsx)(g.zx,{type:"submit",isDisabled:!b||p,isLoading:p,children:o("Form.save")})]})]})})]})]})}function eB(e){let{persona:r,settings:a,dialogTrigger:t}=e,s=(0,M.useRouter)(),n=(0,eM.useSearchParams)(),l=null==n?void 0:n.get("tab"),o=null==n?void 0:n.get("id"),[c,d]=(0,B.useState)(l===N.Zo.Personas&&o===r.external_id),u=(0,eM.usePathname)();return(0,i.jsx)(eK,{persona:r,settings:a,dialogTrigger:t,open:c,setOpen:d,handleCloseCallback:()=>{u&&n&&s.replace(u,void 0,{shallow:!0})}})}function eQ(){let{t:e}=(0,F.$G)(),{personas:r,isLoading:a,isError:t,refetch:s}=(0,e_.T4)(),{settings:n,isLoading:l,isError:o,refetch:c}=(0,eP.Fl)(),d=t||o,u=(0,B.useCallback)(async()=>{t&&await s(),o&&await c()},[t,s,o,c]),m=(null!=r?r:[]).filter(e=>e.external_id===(null!=n?n:{}).default_persona_id),p=(null!=r?r:[]).filter(e=>e.external_id!==(null!=n?n:{}).default_persona_id);return a||l?(0,i.jsx)(ey.$,{}):d||!r?(0,i.jsx)(U.o,{refresh:u}):(0,i.jsxs)("div",{className:"w-full",children:[0===(null!=r?r:[]).length&&(0,i.jsx)("div",{className:"flex w-full justify-center mb-2 mt-4",children:e("Persona.create-persona")}),m.map(e=>(0,i.jsx)(eB,{persona:e,settings:null!=n?n:{},dialogTrigger:"list-item"},e.external_id)),p.map(e=>(0,i.jsx)(eB,{persona:e,settings:null!=n?n:{},dialogTrigger:"list-item"},e.external_id)),(0,i.jsx)("div",{className:"flex w-full justify-center my-2",children:(0,i.jsx)(eB,{persona:eN.j$,settings:null!=n?n:{},dialogTrigger:"new"})})]})}function eZ(e){var r,a,t,s;let{publicUser:n}=e;(0,m.Xu)("Profile");let{user:l,isPlusUser:o}=(0,w.a)(),{t:k}=(0,F.$G)(),S=(0,C.Z)(),O=n.username===n.name,U=null==l?void 0:null===(r=l.user)||void 0===r?void 0:r.username,z=U===n.username,{user:I}=(0,w.a)(),{characters:L}=(0,$.QJ)(!z),{selectedTab:T,handleTabChange:D}=(0,N.Y)(n.username),{config:{enabled:R}}=(0,p.EY)(p.F5.IncentivizedInvites),V=(0,M.useRouter)(),{mutateAsync:q,isLoading:Z}=c.h.social.createInviteForLoggedInUser.useMutation(),H=(0,B.useCallback)(async()=>{var e,r;let a=await q({});V.push(d.nN.invite(null!==(r=null==a?void 0:null===(e=a.invite)||void 0===e?void 0:e.code)&&void 0!==r?r:""))},[q,V]),W=null!==(s=null===(a=n.characters)||void 0===a?void 0:a.reduce((e,r)=>e+r.participant__num_interactions,0))&&void 0!==s?s:0,{currency:X}=(0,y.U)(),Y=(0,K.useGateValue)(p.F5.VirtualCurrency),J=z?o:"PLUS"===n.subscription_type,ee=async()=>{let e=d.nN.profile(n.username);await S(e,"Creator Profile",k("Share.check-out-this-creator",{href:e}))};return(0,i.jsxs)("div",{className:(0,P.cn)("flex flex-col items-center justify-center p-6 pt-0 mt-32 max-w-2xl mx-auto",{"mt-20":!I}),children:[(0,i.jsx)(x.m,{}),(0,i.jsx)(E,{name:n.name,username:n.username,description:n.bio}),(0,i.jsx)(v.V,{name:n.name||"",size:90,src:n.avatar_file_name,rounded:!0,isPlus:J}),(0,i.jsx)("div",{className:"mt-4 text-display flex flex-row gap-1 items-center",children:n.name}),!O&&(0,i.jsx)(f.f,{createdBy:!1,clickable:!1,author:n.username}),(0,i.jsxs)("div",{className:"text-md mt-2 flex items-center justify-center text-muted-foreground gap-2",children:[(0,i.jsx)(eb,{creator:n,thisIsMe:z}),(0,i.jsx)("span",{className:"mx-1",children:"|"}),(0,i.jsx)(h.k,{type:"interactions",num:W,capitalized:!0,iconProps:{size:"1em",className:"-mr-1"}}),!!Y&&!!z&&(0,i.jsx)(h.k,{withPrecedingDot:!0,type:"currency",num:X,capitalized:!0,iconProps:{size:"1em",className:"-mr-1"}})]}),!!n.bio&&(0,i.jsx)("div",{className:"mt-2 text-md text-center whitespace-pre-wrap",children:n.bio.trim()}),(0,i.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[z?(0,i.jsxs)(g.zx,{color:"secondary",onPress:()=>{_.bB.value=!0,u.iN.contentViewed({referrer:"Profile",content:"settings"})},children:[(0,i.jsx)(Q.Nte,{className:"mr-1"}),k("Profile.settings-button")]}):(0,i.jsx)(ep,{username:n.username,requesterUsername:null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.username}),!!R&&!!z&&(0,i.jsxs)(g.zx,{onPress:H,isLoading:Z,children:[(0,i.jsx)(Q.A8q,{}),k("Invite.profile-cta")]}),(0,i.jsx)(g.zx,{isIconOnly:!0,variant:"outline",onPress:ee,title:k("Common.share"),children:(0,i.jsx)(Q.A8q,{})}),!z&&(0,i.jsxs)(g.zx,{variant:"outline",onPress:()=>{_.Nd.value=!0,_.hl.value={username:n.username,type:A.C2.USER}},title:k("Common.report"),children:[(0,i.jsx)(j.U65,{}),k("Common.report")]})]}),(0,i.jsx)("div",{className:"mt-4 w-full",children:(0,i.jsxs)(b.mQ,{defaultValue:T,onValueChange:D,className:"flex flex-col items-center w-full",tabIndex:-1,referrer:"Profile",children:[(0,i.jsxs)(b.dr,{children:[(0,i.jsx)(b.SP,{value:"characters",children:k("Profile.characters")}),!!z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(b.SP,{value:N.Zo.Liked,className:"flex gap-1",children:[(0,i.jsx)(j.Xl7,{height:"16px"}),k("Profile.liked")]}),(0,i.jsxs)(b.SP,{value:N.Zo.Personas,className:"flex gap-1",children:[(0,i.jsx)(j.Xl7,{height:"16px"}),k("Profile.personas")]})]}),(0,i.jsx)(b.SP,{value:N.Zo.Voices,className:"flex gap-1",children:k("Profile.voices")})]}),(0,i.jsx)(b.nU,{value:"characters",className:"flex w-full flex-col items-center",children:(0,i.jsx)(ec,{characters:n.characters,noCharacterText:z?k("Profile.no-characters-you"):k("Profile.no-characters"),thisUsername:U,referrer:"Profile: Characters Tab",hideAuthor:!0,useTags:!z})}),!!z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.nU,{value:N.Zo.Liked,className:"flex w-full flex-col items-center",children:(0,i.jsx)(ec,{characters:L,noCharacterText:k("Profile.no-characters-liked"),thisUsername:U,referrer:"Profile: Liked Tab"})}),(0,i.jsx)(b.nU,{value:N.Zo.Personas,className:"flex w-full flex-col items-center",children:(0,i.jsx)(eQ,{})})]}),(0,i.jsx)(b.nU,{value:N.Zo.Voices,className:"flex w-full flex-col items-center",children:(0,i.jsx)(G,{publicUser:n})})]})})]})}var eH=!0;let eW="experimental-edge",eX=e=>{let{prefetchedPublicUser:r}=e,a=(0,M.useRouter)(),t=d.Wj.slugToString(a.query.username),s=c.h.social.publicProfile.useQuery({username:t});return(0,i.jsx)(eZ,{publicUser:s.data||r})};eX.getLayout=function(e){return(0,i.jsx)(o.d,{children:e})},eX.SignedOut=eX;var eY=eX},38738:function(e,r,a){"use strict";a.d(r,{Ft:function(){return f},Os:function(){return u},QJ:function(){return v},Sz:function(){return o},bu:function(){return d},eq:function(){return h},hO:function(){return m},kP:function(){return x},qY:function(){return p},xS:function(){return c}});var t=a(2784),s=a(79937),n=a(92357),l=a(3963),i=a(13789);let o={user:["user"],publicUser:e=>[...o.user,"public",e],publicFollowers:e=>[...o.user,"public","followers",e],publicFollowing:e=>[...o.user,"public","following",e],followers:()=>[...o.user,"followers"],following:()=>[...o.user,"following"],votedFor:e=>[...o.user,"voted-for",e],votes:e=>["votes",e],upvotesByCharacter:e=>["upvotes-by-character",e],upvotedCharacters:()=>[...o.user,"upvoted-characters"],invite:["social","inviteForLoggedInUser"],inviteCheckOnly:["social","inviteForLoggedInUser","checkOnly"],inviteByCode:e=>["social","inviteByCode",e],inviteSenderRewardEligibility:["social","inviteSenderRewardEligibility"]},c=(e,r,a)=>{let t=(0,i.aM)({queryKey:o.publicUser(e),queryFn:async()=>r?(await (0,s.m)().fetchUserAnon(e)).data.public_user:(await (0,s.m)().fetchUserPublic(e)).data.public_user,staleTime:1/0,initialData:null==a?void 0:a.preloaded,enabled:null==a?void 0:a.enabled});return{user:t.data,...t}},d=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r=arguments.length>1?arguments[1]:void 0,a=(0,i.aM)({queryKey:o.following(),queryFn:async()=>{var e;let a=await (null==r?void 0:null===(e=r.getHeaders)||void 0===e?void 0:e.call(r));return(await (0,n.od)().get("/chat/user/following/",{headers:a})).data.following},staleTime:1/0,enabled:e});return{following:a.data,...a}},u=()=>{let e=(0,i.NL)();return(0,i.Db)(async e=>{let{username:r,requesterUsername:a}=e;return{...(await (0,n.od)().post("/chat/user/follow/",{username:r})).data,username:r,requesterUsername:a}},{onSuccess:r=>{let{username:a,requesterUsername:t}=r;e.invalidateQueries(o.following()),t&&(e.invalidateQueries(o.publicFollowing(t)),e.invalidateQueries(o.publicUser(t))),e.invalidateQueries(o.publicUser(a)),e.invalidateQueries(o.publicFollowers(a))}})},m=()=>{let e=(0,i.NL)();return(0,i.Db)(async e=>{let{username:r,requesterUsername:a}=e;return{...(await (0,n.od)().post("/chat/user/unfollow/",{username:r})).data,username:r,requesterUsername:a}},{onSuccess:r=>{let{username:a,requesterUsername:t}=r;e.invalidateQueries(o.following()),t&&(e.invalidateQueries(o.publicFollowing(t)),e.invalidateQueries(o.publicUser(t))),e.invalidateQueries(o.publicUser(a)),e.invalidateQueries(o.publicFollowers(a))}})},p=(e,r)=>{var a;let s=(0,i.NS)(o.publicFollowers(e),async r=>{let{pageParam:a}=r;return e?(await (0,n.od)().post("/chat/user/public/followers/",{username:e,pageParam:null!=a?a:1})).data:{users:[],has_next_page:!1,meta:{}}},{enabled:null==r?void 0:r.enabled,getNextPageParam:(e,r)=>e.has_next_page?r.length+1:void 0,staleTime:1/0}),l=(0,t.useMemo)(()=>{var e,r,a;return(null!==(a=null===(r=s.data)||void 0===r?void 0:null===(e=r.pages)||void 0===e?void 0:e.flatMap(e=>e.users))&&void 0!==a?a:[]).filter(e=>!!(null==e?void 0:e.username))},[null===(a=s.data)||void 0===a?void 0:a.pages]);return{...s,users:l}},f=(e,r)=>{var a;let s=(0,i.NS)(o.publicFollowing(e),async r=>{let{pageParam:a}=r;return e?(await (0,n.od)().post("/chat/user/public/following/",{username:e,pageParam:null!=a?a:1})).data:{users:[],has_next_page:!1,meta:{}}},{enabled:null==r?void 0:r.enabled,getNextPageParam:(e,r)=>e.has_next_page?r.length+1:void 0,staleTime:1/0}),l=(0,t.useMemo)(()=>{var e,r,a;return(null!==(a=null===(r=s.data)||void 0===r?void 0:null===(e=r.pages)||void 0===e?void 0:e.flatMap(e=>e.users))&&void 0!==a?a:[]).filter(e=>!!(null==e?void 0:e.username))},[null===(a=s.data)||void 0===a?void 0:a.pages]);return{...s,users:l}},h=e=>{var r,a;let t=(0,i.aM)({queryKey:o.votedFor(e),queryFn:async()=>await (0,s.m)().getVotedFor(e),staleTime:1/0});return{voted:null===(r=t.data)||void 0===r?void 0:r.voted,vote:null===(a=t.data)||void 0===a?void 0:a.vote,...t}},x=()=>{let e=(0,i.NL)();return(0,i.Db)(async e=>{let{characterId:r,vote:a}=e;return{...await (0,s.m)().voteCharacter(r,a),characterId:r}},{onSuccess:r=>{e.invalidateQueries(o.votes(r.characterId)),e.invalidateQueries(o.votedFor(r.characterId)),e.invalidateQueries(o.upvotedCharacters()),e.invalidateQueries((0,l.Hc)().info.keys(r.characterId))}})},v=e=>{let r=(0,i.aM)({queryKey:o.upvotedCharacters(),queryFn:async()=>await (0,s.m)().getUpvotedCharacters(),staleTime:1/0,enabled:!e});return{characters:r.data,...r}}},29338:function(e,r,a){"use strict";a.d(r,{fC:function(){return N},z$:function(){return _}});var t=a(7896),s=a(2784),n=a(46389),l=a(30017),i=a(3758),o=a(64147),c=a(32578),d=a(56958),u=a(1),m=a(81722);let p="Checkbox",[f,h]=(0,l.b)(p),[x,v]=f(p),g=(0,s.forwardRef)((e,r)=>{let{__scopeCheckbox:a,name:l,checked:c,defaultChecked:d,required:u,disabled:p,value:f="on",onCheckedChange:h,...v}=e,[g,j]=(0,s.useState)(null),N=(0,n.e)(r,e=>j(e)),_=(0,s.useRef)(!1),P=!g||!!g.closest("form"),[C=!1,k]=(0,o.T)({prop:c,defaultProp:d,onChange:h}),S=(0,s.useRef)(C);return(0,s.useEffect)(()=>{let e=null==g?void 0:g.form;if(e){let r=()=>k(S.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[g,k]),(0,s.createElement)(x,{scope:a,state:C,disabled:p},(0,s.createElement)(m.WV.button,(0,t.Z)({type:"button",role:"checkbox","aria-checked":w(C)?"mixed":C,"aria-required":u,"data-state":y(C),"data-disabled":p?"":void 0,disabled:p,value:f},v,{ref:N,onKeyDown:(0,i.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.M)(e.onClick,e=>{k(e=>!!w(e)||!e),P&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})})),P&&(0,s.createElement)(b,{control:g,bubbles:!_.current,name:l,value:f,checked:C,required:u,disabled:p,style:{transform:"translateX(-100%)"}}))}),j=(0,s.forwardRef)((e,r)=>{let{__scopeCheckbox:a,forceMount:n,...l}=e,i=v("CheckboxIndicator",a);return(0,s.createElement)(u.z,{present:n||w(i.state)||!0===i.state},(0,s.createElement)(m.WV.span,(0,t.Z)({"data-state":y(i.state),"data-disabled":i.disabled?"":void 0},l,{ref:r,style:{pointerEvents:"none",...e.style}})))}),b=e=>{let{control:r,checked:a,bubbles:n=!0,...l}=e,i=(0,s.useRef)(null),o=(0,c.D)(a),u=(0,d.t)(r);return(0,s.useEffect)(()=>{let e=i.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&r){let t=new Event("click",{bubbles:n});e.indeterminate=w(a),r.call(e,!w(a)&&a),e.dispatchEvent(t)}},[o,a,n]),(0,s.createElement)("input",(0,t.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!w(a)&&a},l,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function w(e){return"indeterminate"===e}function y(e){return w(e)?"indeterminate":e?"checked":"unchecked"}let N=g,_=j}},function(e){e.O(0,[3371,2544,6302,7669,2888,9774,179],function(){return e(e.s=30186)}),_N_E=e.O()}]);