(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1816],{53527:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/video",function(){return a(94713)}])},22801:function(e,t,a){"use strict";a.d(t,{o:function(){return o}});var i=a(52322),s=a(92488),r=a(15030),l=a(93326),n=a(92599);let o=e=>{let{trigger:t,disabled:a=!1}=e;return(0,i.jsx)(l.zx,{isDisabled:a,onPress:()=>{s.uW.value=t,localStorage.setItem(r.hl.Keys.BetaEducationShown,"true")},size:"sm",variant:"outline",className:"rounded-spacing-xxs p-1 text-sm h-6 text-muted-foreground border-1 border-muted-foreground",children:(0,i.jsxs)("div",{className:"flex gap-1 text-sm",children:[(0,i.jsx)(n.ynJ,{className:"size-4 ml-0"}),"BETA"]})})}},43855:function(e,t,a){"use strict";a.d(t,{j:function(){return l}});var i=a(52322),s=a(2784);class r{setText(e){let t=this.el.innerText,a=Math.max(t.length,e.length),i=new Promise(e=>this.resolve=e);this.queue=[];for(let i=0;i<a;i++){let a=t[i]||"",s=e[i]||"",r=Math.floor(40*Math.random()),l=r+Math.floor(40*Math.random());this.queue.push({from:a,to:s,start:r,end:l})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),i}update(){let e="",t=0;for(let a=0,i=this.queue.length;a<i;a++){let i=this.queue[a];if(null==i)continue;let{from:s,to:r,start:l,end:n}=i,{char:o}=i;this.frame>=n?(t++,e+=r):this.frame>=l?((!o||.28>Math.random())&&(o=this.randomChar(),this.queue[a].char=o),e+='<span class="text-muted-foreground">'.concat(o,"</span>")):e+=s}this.el.innerHTML=e,t===this.queue.length?this.resolve({}):(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}constructor(e){this.el=e,this.chars="!<>-_\\/[]{}—=+*^?#________",this.update=this.update.bind(this),this.frameRequest=0,this.queue=[],this.frame=0,this.resolve=()=>{}}}function l(e){let{phrases:t,className:a="",autoInterval:l=0}=e,n=(0,s.useRef)(null),o=(0,s.useRef)(),c=(0,s.useRef)(),[d,u]=(0,s.useState)(0);return(0,s.useEffect)(()=>{if(clearTimeout(o.current),n.current){let e=new r(n.current);o.current=setTimeout(()=>{e.setText(t[d])},600)}return()=>clearTimeout(o.current)},[t,d]),(0,s.useEffect)(()=>{l&&(c.current=setInterval(()=>{u((d+1)%t.length)},l))},[l,d,t.length]),(0,i.jsx)("div",{className:a,ref:n,onMouseEnter:()=>{u((d+1)%t.length)}})}},91724:function(e,t,a){"use strict";a.d(t,{Y:function(){return x},Zo:function(){return s},bR:function(){return f}});var i,s,r=a(35740),l=a(55264),n=a(79937),o=a(85108),c=a(5632),d=a(2784),u=a(30195);(i=s||(s={})).Characters="characters",i.Liked="liked",i.Voices="voices",i.Personas="personas";let m="characters",h=u.z.object({username:u.z.string(),tab:u.z.string()}).partial(),g=e=>e&&Object.values(s).includes(e)?e:m,x=e=>{let t=(0,c.useRouter)(),a=h.safeParse(t.query),{tab:i}=a.success?a.data:{tab:m},[s,r]=(0,d.useState)(g(i));return{selectedTab:s,handleTabChange:a=>{let i=g(a);r(i),t.replace(l.nN.profile(e,i),void 0,{shallow:!0})}}},f=()=>{var e;let{user:t}=(0,r.a)();return(0,o.a)({queryKey:["publicUser",null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.username],queryFn:()=>(0,n.m)().fetchCharactersCreatedByUser(),select:e=>(null==e?void 0:e.characters)||[]})}},23018:function(e,t,a){"use strict";a.d(t,{N:function(){return s},V:function(){return r}});var i=a(13959);let s=(0,i.y)(),r=(0,i.y)()},94713:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return tV},default:function(){return tD},runtime:function(){return tR}});var i,s,r,l,n,o,c,d,u,m,h,g,x=a(52322),f=a(21236),p=a(6669),v=a(50567),_=a(22801),N=a(16981),j=a(35740),E=a(92488),b=a(3699),w=a(83614),y=a(23657),T=a(10386),A=a(6975),C=a(46086),I=a(35505),S=a(93326),P=a(84422),O=a(61676),V=a(55264),R=a(2784),k=a(97e3),D=a(92599);let G={default:4,1280:3,1024:2},L=Array(12).fill(0).map((e,t)=>"".concat(t)),F=()=>{let[e,t]=(0,R.useState)(null),[a,i]=(0,R.useState)([]);return(0,R.useEffect)(()=>{i((0,V.Sy)(L))},[]),(0,x.jsx)(k.Z,{breakpointCols:G,className:"flex w-auto max-w-[1340px]",children:a.map((a,i)=>(0,x.jsx)("div",{children:(0,x.jsx)(U,{index:i,url:"https://characterai.io/static/media/landing_s/landing".concat(a,"_s.mp4"),onMute:()=>{e===i?t(null):t(i)},isMuted:e!==i})},i))})},U=e=>{let{url:t,onMute:a,isMuted:i,index:s}=e,r=(0,R.useRef)(null);return(0,R.useEffect)(()=>{r.current&&setTimeout(()=>{r.current&&0===r.current.readyState&&r.current.load()},250*s)},[s]),(0,x.jsxs)("div",{className:(0,O.cn)("relative m-4"),children:[(0,x.jsx)("video",{ref:r,className:"rounded-spacing-s overflow-hidden transition-all duration-500 cursor-pointer",src:t,muted:i,playsInline:!0,loop:!0,autoPlay:!0,onClick:a,"data-stagger-load":!0,preload:"metadata"}),(0,x.jsx)("button",{onClick:a,type:"button",className:"absolute left-4 bottom-8 w-6 h-6",children:i?(0,x.jsx)(D.IbZ,{className:"w-6 h-6 text-white opacity-80"}):(0,x.jsx)(D.CjM,{className:"w-8 h-8 text-white opacity-80"})})]})};var z=a(97729),M=a.n(z);let Y="c.ai - AvatarFX",H="Make images come to life",q=()=>(0,x.jsxs)(M(),{children:[(0,x.jsx)("title",{children:Y}),(0,x.jsx)("meta",{name:"description",content:H},"description"),(0,x.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,x.jsx)("meta",{property:"og:title",content:Y},"og:title"),(0,x.jsx)("meta",{property:"og:description",content:H},"og:description"),(0,x.jsx)("meta",{property:"og:image",content:"https://characterai.io/og/og-avfx.jpg"},"og:image")]}),B=["#FFD20C","#54AEFF","#FF8648","#FF36C1"],X="https://www.surveymonkey.com/r/avatarfx",K=()=>{(0,p.Xu)("VideoGenNoAccess");let{t:e}=(0,T.$G)();return(0,x.jsxs)("div",{className:"flex flex-col gap-4 p-6 px-8 bg-background h-full items-center overflow-x-hidden",children:[(0,x.jsx)(q,{}),(0,x.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[(0,x.jsx)(C.t,{size:"large"}),(0,x.jsx)(A.r,{})]}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center w-full pt-6",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,x.jsx)(P.l,{className:"text-3xl mt-1 labs-gradient-animated"}),(0,x.jsx)(_.o,{trigger:E.c.VideoGen,disabled:!0})]}),(0,x.jsxs)("div",{className:"flex flex-col pt-3 items-center gap-5 z-50",children:[(0,x.jsx)("p",{className:"text-center text-2xl",children:e("Video.Landing.make-images-come-to-life")}),(0,x.jsx)("p",{children:e("Video.Landing.out-now-for-all-c-ai-members")}),(0,x.jsx)("p",{className:"text-center text-sm text-muted-foreground font-light",children:e("Video.Landing.video-gen-from-character-ai")}),(0,x.jsx)($,{}),(0,x.jsx)(F,{})]}),(0,x.jsx)(b.d,{blur:75,className:"h-96 w-96 absolute hidden sm:flex top-0"})]}),(0,x.jsx)(I.$,{})]})},Z=()=>{let{t:e}=(0,T.$G)();return(0,x.jsx)(S.zx,{href:X,target:"_blank",as:N.rU,analytics:{name:"linkOpened",properties:{referrer:"video-gen-no-access",link:X,type:"survey"}},variant:"ghost",className:"bg-surface-elevation-2 w-fit text-lg h-full p-2 px-4",children:e("Video.apply-for-early-access")})},$=()=>{let{t:e}=(0,T.$G)(),{isPlusUser:t,user:a}=(0,j.a)(),i=(0,w.useGateValue)(v.F5.AvatarFXWaitlist);return a?t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(y.Z,{zIndex:50,colors:B,duration:5e3,force:.4}),(0,x.jsx)("p",{className:"text-center whitespace-pre-line",children:e("Video.caiplus-description")})]}):(0,x.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,x.jsx)(S.zx,{className:"text-white labs-gradient",onPress:()=>{f.iN.elementClicked({action:"video_gen_no_access_subscribe",referrer:"VideoGenNoAccess"}),E.Um.value={referrer:"VideoGenNoAccess"}},children:e("Video.upgrade-to-c-ai")}),!!i&&(0,x.jsx)(Z,{})]}):i?(0,x.jsx)(Z,{}):null};var W=a(50090);let Q=["pause","happy","sad","angry"],J=["exclaim","whisper","serious","calm","loud","soft","dramatic","fast","slow","shout","mutter","question","command","plead","encourage","quiet"],ee={GENERIC_IMAGE_SAFETY:1e4,IMAGE_VIOLATES_GUIDELINES:10001,CONTENT_VIOLATES_GUIDELINES_GENERAL:10002,QUOTA_EXCEEDED:10003,NO_FACE_DETECTED:10004,NOT_CONTAIN_REALISTIC_YOUTH:10005,NOT_CONTAIN_BLOCKED_CELEBRITY_IP:10006,UNSAFE_TEXT_AUDIO_CONTENT:10007};function et(e){switch(e){case ee.IMAGE_VIOLATES_GUIDELINES:return"Video.Error.IMAGE_VIOLATES_GUIDELINES";case ee.CONTENT_VIOLATES_GUIDELINES_GENERAL:return"Video.Error.CONTENT_VIOLATES_GUIDELINES_GENERAL";case ee.NO_FACE_DETECTED:return"Video.Error.NO_FACE_DETECTED";case ee.QUOTA_EXCEEDED:return"Video.Error.QUOTA_EXCEEDED";case ee.GENERIC_IMAGE_SAFETY:return"Video.Error.GENERIC_IMAGE_SAFETY";case ee.NOT_CONTAIN_REALISTIC_YOUTH:return"Video.Error.NOT_CONTAIN_REALISTIC_YOUTH";case ee.NOT_CONTAIN_BLOCKED_CELEBRITY_IP:return"Video.Error.NOT_CONTAIN_BLOCKED_CELEBRITY_IP";case ee.UNSAFE_TEXT_AUDIO_CONTENT:return"Video.Error.UNSAFE_TEXT_AUDIO_CONTENT";default:return"Error.something-went-wrong"}}function ea(e){try{var t;let a=null===(t=e.match(/([a-f0-9-]+)\.mp4(?:\?|$)/))||void 0===t?void 0:t[1];if(!a)return null;return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a)?a:null}catch(e){return null}}function ei(e){return"".concat(window.location.origin,"/share/v/").concat(e)}(i=c||(c={})).USER_UPLOAD="user_upload",i.CHARACTER_AVATAR="character_avatar",i.EXTERNAL_URL="external_url",i.EXAMPLE_IMAGE="example_image",i.TRANSFORMED_IMAGE="transformed_image",i.COLD_START_IMAGE="cold_start_image";var es=a(48364),er=a(8950),el=a(79937),en=a(13789),eo=a(36449),ec=a(70677),ed=a(80613),eu=a(15584),em=a(2608);let eh=new eu.MZ,eg=new eu.MZ,ex=e=>(0,en.Db)(async e=>{let{imageUrl:t,summaryMaxLength:a}=e;return(await (0,el.m)().generateImageDescription({image_url:t,summary_max_length:a})).summary},{mutationKey:["generateImageDescription",e]}),ef=()=>(0,en.Db)(async e=>{let{voiceId:t,text:a}=e;return(await (0,el.m)().getVoiceOver(t,a)).audio_url}),ep=()=>(0,en.Db)(async e=>(await (0,el.m)().uploadStudioAudio(e)).audio_url),ev=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pollingInterval:2e3,onSuccess:e=>{}},{t}=(0,T.$G)(),a=(0,eu.BF)(eh),i=(0,eu.BF)(eg),[s,r]=(0,R.useState)(null),[l,n]=(0,R.useState)(null),[o,c]=(0,R.useState)(!1),[d,u]=(0,R.useState)(null),m=(0,R.useRef)(null),[h,g]=(0,R.useState)(null),[x,p]=(0,R.useState)(null),v=(0,en.Db)(["generateVideo"],async e=>{let{prompt:t,imageUrl:s,audioUrl:r,audioTranscript:l=null,characterId:n}=e;try{let e=await (0,el.m)().generateVideo({prompt:t,image_url:s,audio_url:r,audio_transcript:l,vip:a,debug_enabled:i,character_id:n});if(!e.data.video_id)throw Error("Failed to generate video: NO VIDEO ID");return{videoId:e.data.video_id,headers:e.headers}}catch(e){throw(0,es.H)("Failed to generate video",{error:e}),e}}),_=(0,en.Db)(["checkVideoGenerationStatus"],async e=>{try{let t=await (0,el.m)().getVideoStatus(e);return{status:t.status,video_url:t.video_url,message:t.message,progress_number:t.progress_number}}catch(e){throw(0,es.H)("Failed to check video generation status",{error:e}),e}});return(0,R.useEffect)(()=>{let a=async()=>{if(d)try{let t=await _.mutateAsync(d);if("ERRORED"===t.status)throw Error(t.message);if(r(t.status),g(t.progress_number),"COMPLETED"===t.status&&t.video_url){n(t.video_url),c(!1),f.iN.userVideoGenerationCompleted({video_url:t.video_url}),e.onSuccess&&e.onSuccess(t.video_url),m.current&&(clearInterval(m.current),m.current=null);return}m.current=setTimeout(a,e.pollingInterval)}catch(e){if(e instanceof ed.d7){var i;let a=null===(i=e.response)||void 0===i?void 0:i.data.sub_code;(0,em.A)(t(et(a)))}else(0,em.A)(t("Error.something-went-wrong"));c(!1),g(null),n(null),r(er.Yn.ERRORED),p(null),m.current&&(clearInterval(m.current),m.current=null)}};return d&&!m.current&&(m.current&&(clearTimeout(m.current),m.current=null),m.current=setTimeout(a,e.pollingInterval)),()=>{m.current&&(clearInterval(m.current),m.current=null)}},[d]),{startVideoGeneration:(0,R.useCallback)(async(e,a,i,s,l)=>{r(er.Yn.QUEUED),n(null),c(!0),p(new Date);try{let{videoId:t}=await v.mutateAsync({prompt:e,imageUrl:a,audioUrl:i,audioTranscript:s,characterId:l});return u(t),t}catch(e){if(e instanceof ed.d7){var o;let a=null===(o=e.response)||void 0===o?void 0:o.data.sub_code;(0,em.A)(t(et(a)))}else(0,em.A)(t("Error.something-went-wrong"));c(!1)}},[v,t]),cancelVideoGeneration:(0,R.useCallback)(()=>{u(null),c(!1)},[]),videoGenStatus:s,videoGenUrl:l,videoGenIsLoading:o,videoGenId:d,videoGenProgress:h,videoGenStartedAt:x}},e_=()=>{let e=(0,w.useGateValue)(v.F5.AvatarFXUsageLimitsEnabled);return(0,eo.SX)(ec.M$.AvatarFX,e)},eN=()=>(0,en.Db)(async e=>(await (0,el.m)().postPublicVideo({video_id:e})).data.video_url),ej=()=>({images:(0,w.useDynamicConfig)(v.Lo.VideoGenPresetImages).get("images",[])}),eE=()=>({artStyles:(0,w.useDynamicConfig)(v.Lo.AvatarFXTransformArtStyle).get("art_styles",[])}),eb=(0,R.createContext)({remoteImageUrl:null,setRemoteImageUrl:()=>{},previewImageUrl:null,setPreviewImageUrl:()=>{},voiceUrl:null,setVoiceUrl:()=>{},selectedCharacter:null,setSelectedCharacter:()=>{},audioTranscript:null,setAudioTranscript:()=>{},audioDuration:0,setAudioDuration:()=>{},imageSource:null,setImageSource:()=>{},imageDescription:null,setImageDescription:()=>{},aspectRatio:null,setAspectRatio:()=>{},featureLimit:void 0,isReady:!1,selectedVoice:null,setSelectedVoice:()=>{},characterName:null,setCharacterName:()=>{},isAudioTooShort:!1,showColdStart:!0,setShowColdStart:()=>{},violatingImageUrl:null,setViolatingImageUrl:()=>{},videoGenStatus:null,videoGenUrl:null,videoGenIsLoading:!1,videoGenProgress:null,startVideoGeneration:()=>Promise.resolve("")});function ew(e){let{children:t}=e,[a,i]=(0,R.useState)(null),[s,r]=(0,R.useState)(null),[l,n]=(0,R.useState)(null),[o,d]=(0,R.useState)(null),[u,m]=(0,R.useState)(null),[h,g]=(0,R.useState)(0),[f,p]=(0,R.useState)(null),[v,_]=(0,R.useState)(null),[N,j]=(0,R.useState)(1.6),[E,b]=(0,R.useState)(null),[w,y]=(0,R.useState)(null),{featureLimit:T,refetch:A}=e_(),[C,I]=(0,R.useState)(!0),[S,P]=(0,R.useState)(null),{startVideoGeneration:O,videoGenStatus:V,videoGenUrl:k,videoGenIsLoading:D,videoGenProgress:G}=ev();(0,R.useEffect)(()=>{k&&A()},[k,A]);let L=h<3,F=!!(a&&l&&!L&&(!T||(null==T?void 0:T.count_remaining)>0));(0,R.useEffect)(()=>{f!==c.CHARACTER_AVATAR&&d(null)},[f]),(0,R.useEffect)(()=>{o&&!S&&o.voice_id&&P({voiceId:o.voice_id,displayName:o.name})},[o,S]);let U=(0,R.useMemo)(()=>({remoteImageUrl:a,setRemoteImageUrl:i,previewImageUrl:s,setPreviewImageUrl:r,voiceUrl:l,setVoiceUrl:n,selectedCharacter:o,setSelectedCharacter:d,audioTranscript:u,setAudioTranscript:m,audioDuration:h,setAudioDuration:g,imageSource:f,setImageSource:p,imageDescription:v,setImageDescription:_,aspectRatio:N,setAspectRatio:j,featureLimit:T,isReady:F,selectedVoice:S,setSelectedVoice:P,characterName:E,setCharacterName:b,isAudioTooShort:L,showColdStart:C,setShowColdStart:I,violatingImageUrl:w,setViolatingImageUrl:y,videoGenStatus:V,videoGenUrl:k,videoGenIsLoading:D,videoGenProgress:G,startVideoGeneration:O}),[a,s,l,o,u,h,f,i,r,n,d,m,g,p,j,T,F,S,P,E,b,v,_,L,C,I,w,y,N,V,k,D,G,O]);return(0,x.jsx)(eb.Provider,{value:U,children:t})}let ey=()=>(0,R.useContext)(eb);var eT=a(43855),eA=a(92014);let eC=()=>{var e;let{remoteImageUrl:t,imageDescription:a,setImageDescription:i}=ey(),s=(0,R.useRef)(null),{images:r}=ej(),{t:l}=(0,T.$G)(),[n,o]=(0,R.useState)(!1),{mutate:c,isLoading:d}=ex(t),u=(0,R.useMemo)(()=>r.reduce((e,t)=>(e[t.image_url]=t.description,e),{}),[r]);return((0,R.useEffect)(()=>{if(i(""),t){let e=u[t];e?i(e):(o(!1),c({imageUrl:t,summaryMaxLength:12},{onSuccess:e=>{i(e)}}))}},[t,u]),t)?(0,x.jsx)("div",{className:"flex flex-row gap-4",children:(0,x.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,x.jsxs)("div",{className:"flex text-md font-medium flex-row justify-between w-full",children:[(0,x.jsx)("span",{children:l("Video.image-description")}),!n&&!d&&(0,x.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,x.jsx)(D.dY8,{className:"size-3"}),(0,x.jsx)("button",{type:"button",onClick:()=>{o(!0),f.iN.elementClicked({referrer:"VideoGenImageDescription",action:"video_gen_edit_image_description"})},className:(0,O.cn)("underline"),children:l("Common.edit")})]})]}),(0,x.jsxs)("div",{className:(0,O.cn)("flex flex-col gap-2 px-4 pt-4 pb-2 rounded-spacing-s",n&&"border-1 border-input"),children:[!d&&(0,x.jsx)(eA.g,{disableEdits:!n,ref:s,disabled:!n,value:null!=a?a:"",className:"border-0 py-0 px-0 !rounded-none",maxLength:450,onChange:e=>i(e.target.value)}),!!d&&(0,x.jsx)(eT.j,{phrases:["Visualizing...","Thinking...","Analyzing...","Creating...","Generating..."],className:"text-muted-foreground text-md font-medium",autoInterval:1e3}),!!n&&(0,x.jsx)("div",{className:"flex flex-row gap-2 justify-between items-center",children:(0,x.jsxs)("p",{className:"text-sm text-muted-foreground",children:[null!==(e=null==a?void 0:a.length)&&void 0!==e?e:0," / ",450]})})]})]})}):null};var eI=a(91724),eS=a(75257),eP=a(87790),eO=a(81364);let eV=e=>{let{characters:t,onSelect:a,containerClassName:i,className:s,placeholder:r,inputClassName:l,resultContainerStyle:n}=e,o=(0,R.useRef)(null);(0,eS.Z)(o,()=>{m(!1)});let{t:c}=(0,T.$G)(),d=(0,R.useRef)(null),[u,m]=(0,R.useState)(!1),[h,g]=(0,R.useState)(""),f=()=>{g("")},p=e=>{null==a||a(e),m(!1),f()},v=(0,R.useMemo)(()=>h.length>0?t.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())):t,[h,t]),_=v.length>0&&u;return(0,x.jsxs)("div",{className:i,children:[(0,x.jsx)("div",{className:(0,O.cn)("relative h-10 mr-4",i),children:(0,x.jsxs)("div",{className:(0,O.cn)("absolute z-40 flex gap-2 w-full border-spacing-1 border-divider flex-row self-center items-center rounded-spacing-xs bg-surface-elevation-1 p-2 placeholder:text-placeholder",s),children:[(0,x.jsx)(D.W1M,{height:"1.25em",className:"ml-1"}),(0,x.jsx)(eO.I,{onFocus:()=>m(!0),className:(0,O.cn)("rounded-full rounded-l-none border-none bg-transparent placeholder:text-muted-foreground p-0 relative",l),type:"text",ref:d,placeholder:r,onChange:e=>g(e.target.value),value:h}),!!h&&(0,x.jsx)(S.zx,{"aria-label":c("Common.clear-search"),variant:"ghost",size:"sm",isIconOnly:!0,className:"mr-2 h-fit min-w-fit w-fit",onPress:f,children:(0,x.jsx)(D.Two,{height:"1.25em",color:"var(--icon-secondary)"})})]})}),!!_&&(0,x.jsx)("div",{className:"flex justify-end md:justify-center self-center -ml-3",children:(0,x.jsx)("div",{ref:o,className:(0,O.cn)(["absolute z-[100] flex h-fit max-h-96 grow w-full overflow-y-scroll rounded-spacing-s bg-surface-elevation-1 px-3 flex-col pt-2",n]),children:!!v&&v.length>0&&(0,x.jsx)(x.Fragment,{children:v.map((e,t)=>(0,x.jsx)(eP.J,{referrer:"GuideSearchbar_SearchResult",src:e.avatar_file_name,onClick:()=>p(e),name:e.name,nameClassname:"text-sm",avatarImageSize:32,id:e.id,index:t,disableLinkNavigation:!!a},e.id))})})})]})};var eR=a(46272),ek=a(6553),eD=a(51100),eG=a(59131);let eL=e=>{let{intensity:t=.5,className:a=""}=e,i=2-1.8*Math.max(0,Math.min(1,t)),s=(0,R.useRef)(0),[,r]=(0,R.useState)(0);return(0,R.useEffect)(()=>{let e;let t=0,a=l=>{t||(t=l);let n=360/(1e3*i)*(l-t);s.current+=n,r(e=>e+1),t=l,e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{cancelAnimationFrame(e)}},[i]),(0,x.jsx)("div",{className:(0,O.cn)("relative w-32 h-32",a),children:(0,x.jsx)("div",{className:"absolute inset-0 border-4 border-transparent border-t-[#8550FF] rounded-full",style:{transform:"rotate(".concat(s.current,"deg)")}})})};var eF=a(96577),eU=a.n(eF);let ez=()=>{let{setPreviewImageUrl:e,setRemoteImageUrl:t,setImageSource:a,setViolatingImageUrl:i}=ey(),{images:s}=ej(),{t:r}=(0,T.$G)(),[l,n]=(0,R.useState)([]);return((0,R.useEffect)(()=>{s.length>0&&n((0,V.Sy)(s).slice(0,8))},[s]),0===s.length)?null:(0,x.jsxs)("div",{className:"flex flex-col gap-3 w-full pl-4 pr-4 text-sm pb-4 z-50",children:[(0,x.jsx)("div",{className:"h-0.5 rounded-lg bg-surface-elevation-3 w-12 mr-auto ml-auto"}),(0,x.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,x.jsx)("div",{children:r("Video.try-an-example")}),(0,x.jsx)("div",{className:"text-muted-foreground cursor-pointer hover:underline",onClick:()=>{E.wj.value=!0},children:r("Common.see-more")})]}),(0,x.jsx)("div",{className:"flex flex-row gap-2 h-fit",children:l.map(s=>(0,x.jsxs)("div",{className:"relative group",children:[(0,x.jsx)(eU(),{src:s.image_url,alt:s.tag,className:"w-12 h-full rounded-spacing-xs cursor-pointer transition-opacity duration-300 opacity-0 object-cover",width:48,height:48,onClick:()=>{e(s.image_url),t(s.image_url),i(null),a(c.EXAMPLE_IMAGE),f.iN.elementClicked({target:"video-gen-example-image",action:"select_image",value:s.image_url,referrer:"VideoGenSampleCarousel"})},onLoad:e=>{e.target.classList.replace("opacity-0","opacity-100")}},s.image_url),(0,x.jsx)("div",{className:"w-32 overflow-hidden rounded-spacing-xxs border-2 border-foreground -bottom-4 absolute z-50 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-opacity duration-200 left-1/2 -translate-x-1/2 mb-2 pointer-events-none group-hover:pointer-events-none",children:(0,x.jsx)(eU(),{src:s.image_url,alt:s.tag,width:128,height:120})})]},s.image_url))})]})},eM=["#EB99FF","#8550FF","#8DB9E4","#EB99FF"],eY=()=>{let{previewImageUrl:e,setPreviewImageUrl:t,setRemoteImageUrl:a,setAspectRatio:i,imageSource:s,setImageSource:r,setViolatingImageUrl:l,violatingImageUrl:n}=ey(),{t:o}=(0,eG.$G)(),[d,u]=(0,R.useState)(!1),{artStyles:m}=eE(),{mutate:h,isLoading:g}=eB(),{mutate:p,isLoading:v}=eq();(0,R.useEffect)(()=>{s===c.CHARACTER_AVATAR&&e&&(l(null),a(null),h(e,{onSuccess:e=>{a(e.value),l(null)},onError:e=>{if(a(null),e instanceof ed.d7){var i,s;let a=null===(i=e.response)||void 0===i?void 0:i.data.sub_code,r=null===(s=e.response)||void 0===s?void 0:s.data.original_url;r&&a===ee.IMAGE_VIOLATES_GUIDELINES?(f.iN.imageViolationDetected(),l(r)):a?(t(null),(0,em.A)(o(et(a)))):((0,em.A)(o("Error.something-went-wrong")),t(null))}(0,es.H)("Failed to check image safety",{error:e})}}))},[s,e,h,t,a,l,o]);let _=(0,R.useCallback)(e=>{let i=e[0];if(i){if(i.size>5242880){(0,em.A)(o("Video.please-select-an-image-smaller-than-size-mb",{size:5}));return}let e=new FileReader;e.onloadend=()=>{t(e.result)},e.readAsDataURL(i),f.iN.elementClicked({action:"video_gen_upload_image",referrer:"ImageDropzoneUploader",value:{file_size:i.size}}),r(c.USER_UPLOAD),eH(i,e=>{u(e)}).then(e=>{a(e)}).catch(e=>{if(a(null),e instanceof ed.d7){var i,s;let a=null===(i=e.response)||void 0===i?void 0:i.data.sub_code,r=null===(s=e.response)||void 0===s?void 0:s.data.original_url;r&&a===ee.IMAGE_VIOLATES_GUIDELINES?(f.iN.imageViolationDetected(),l(r)):a?(t(null),(0,em.A)(o(et(a)))):((0,em.A)(o("Error.something-went-wrong")),t(null))}(0,es.H)("Failed to upload chat image attachment",{error:e})})}},[t,a,o,r,l]),N=e=>{n&&(f.iN.elementClicked({action:"video_gen_transform_image_with_art_style",referrer:"ImageDropzoneUploader",value:{art_style:e}}),p({imageUrl:n,artStyle:e},{onSuccess:e=>{r(c.TRANSFORMED_IMAGE),a(e.data.image_url),t(e.data.image_url),l(null)},onError:e=>{t(null),a(null),l(null),(0,es.H)("Failed to transform image",{error:e}),(0,em.A)(o("Video.error-transforming-image"))}}))},{getRootProps:j,getInputProps:E,isDragActive:b,open:w}=(0,eD.uI)({onDrop:_,accept:{"image/*":[]},noClick:!0});return(0,x.jsxs)("div",{className:(0,O.cn)("w-full flex flex-col gap-2 relative",{}),children:[!!e&&!v&&(0,x.jsx)("div",{className:"flex flex-row gap-2 absolute right-2 bottom-2 z-50",children:(0,x.jsx)("button",{type:"button","aria-label":"Remove image",onClick:()=>{t(null),a(null),l(null),f.iN.elementClicked({action:"video_gen_remove_image",referrer:"ImageDropzoneUploader"})},children:(0,x.jsx)(D.XHJ,{className:"size-4"})})}),(0,x.jsx)("span",{className:"text-md font-medium",children:o("Videocharacter-image")}),(0,x.jsx)("p",{className:"text-sm text-muted-foreground",children:o("Video.make-sure-your-image-includes-a-face")}),(0,x.jsxs)("div",{...j(),className:(0,O.cn)(["border-1 rounded-xl border-input flex justify-center items-center transition-colors relative h-96 flex-col",{"border-blue-500 bg-blue-50":b,"border-accent bg-background":!b,"border-dashed":!e}]),children:[(0,x.jsx)("input",{...E()}),e?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{onLoad:e=>{i(e.target.naturalWidth/e.target.naturalHeight)},src:e,alt:"Preview",className:(0,O.cn)("h-full z-40 object-contain absolute",{"opacity-10":d||n||g})}),!!(d||g)&&(0,x.jsx)(eL,{className:"absolute z-50",intensity:.8})]}):(0,x.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center relative h-full w-full",children:[(0,x.jsxs)(S.zx,{variant:"primary",className:"w-fit",onPress:w,children:[(0,x.jsx)(D.rG2,{className:"size-4"}),o("CharacterEditor.Form.GenerateAvatar.upload-image")]}),(0,x.jsx)("p",{className:"text-md",children:o("Video.or-drag-an-image-here")}),(0,x.jsx)("div",{className:"flex flex-col gap-2 absolute bottom-4 text-center",children:(0,x.jsx)("p",{className:"text-sm text-muted-foreground",children:"png/jpg, 1kb-5mb"})})]}),!!n&&!v&&(0,x.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center h-full w-full z-50 absolute p-6 text-center pointer-events-none",children:[(0,x.jsx)("p",{className:"text-md z-50 pointer-events-auto",children:(0,x.jsxs)(eG.cC,{i18nKey:"Video.Error.IMAGE_VIOLATES_GUIDELINES",children:["This looks like a real person’s photo",(0,x.jsx)("span",{onClick:()=>{f.iN.elementClicked({action:"video_gen_try_different_image",referrer:"ImageDropzoneUploader"}),l(null),t(null),a(null)},className:"underline cursor-pointer",children:"choose a new image"}),"or try giving this one a fresh new look."]})}),m.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:"text-md pt-2",children:o("Video.try-a-different-art-style")}),(0,x.jsx)("div",{className:"flex flex-row gap-2 pointer-events-auto flex-wrap",children:m.map((e,t)=>(0,x.jsx)(S.zx,{variant:"outline",onPress:()=>N(e.value),className:"w-fit bg-surface-elevation-2",style:{borderColor:eM[t%eM.length]},children:e.display_name},e.value))})]})]}),!!v&&(0,x.jsxs)("div",{className:"flex flex-col gap-4 justify-center items-center h-full w-full z-50 absolute",children:[(0,x.jsx)(eL,{className:"w-10 h-10",intensity:.8}),(0,x.jsx)(eT.j,{phrases:eX(Math.random()),className:"text-md text-muted-foreground",autoInterval:4e3})]}),!e&&(0,x.jsx)(ez,{})]})]})};async function eH(e,t){try{t(!0);let a=new FileReader,i=await new Promise((t,i)=>{a.onload=()=>t(a.result),a.onerror=i,a.readAsDataURL(e)}),s=(0,ek.k)(i),r=new FormData;return r.append("image",s),r.append("origin","avatar_fx"),await (0,el.m)().uploadPrivateImage({formData:r})}finally{t(!1)}}let eq=()=>(0,en.Db)({mutationFn:e=>(0,el.m)().transformImage({image_url:e.imageUrl,art_style:e.artStyle})}),eB=()=>(0,en.Db)({mutationFn:e=>(0,el.m)().checkImageSafety(e)}),eX=e=>(0,V.Sy)(["Gently nudging the pixels...","Politely asking the image to change outfits...","Giving this one a modest makeover...","Evolving this art into guideline mode...","Respectfully realigning reality...","Helping this image pass the vibe check...","Dialing down the digital daring...","Reimagining this with a splash of safety...","Replacing suggestive with suggestible...","Translating bold choices into bold compliance...","Sending this image to etiquette school...","Smoothing the edges of controversy...","Declining the risqu\xe9 RSVP...","Transforming style with subtlety...","Harmonizing expression with expectations...","Cropping the chaos, framing the calm...","Adjusting artistic freedom to artistic friendliness...","Inviting this image to the ‘PG’ party...","Making this masterpiece safe for work...","Blurring the lines—just the right ones...","Giving this picture a respectful remix...","Turning down the spice, keeping the flavor...","Helping the AI make better life choices...","Reframing reality, respectfully..."],e);var eK=a(67378),eZ=a(23018),e$=a(27909),eW=a(54900),eQ=a(1910);a(66576);var eJ=a(9010);let e0=e=>{let{setVoiceUrl:t,onSuccess:a}=e,{t:i}=(0,T.$G)(),[s,r]=(0,R.useState)(!1),l=(0,R.useRef)(null),{mutate:n}=ep();return(0,x.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[!!s&&(0,x.jsx)(eJ.$,{size:12}),!s&&(0,x.jsx)(eQ.Z,{className:"size-3"}),(0,x.jsx)("input",{type:"file",accept:"audio/mp3, audio/wav, audio/ogg, audio/m4a, audio/aac, audio/webm",ref:l,onChange:e=>{var s;let l=null===(s=e.target.files)||void 0===s?void 0:s[0];if(f.iN.elementClicked({action:"video_gen_upload_audio",referrer:"AudioFilePicker"}),l&&l.type.startsWith("audio/")){if(l.size>5242880){(0,em.A)(i("Video.please-select-audio-smaller-than-size-mb",{size:5}));return}r(!0),n(l,{onSuccess:e=>{r(!1),t(e),a()},onError:e=>{if(r(!1),(0,es.H)("Error uploading audio",{error:e}),e instanceof ed.d7){var t;let a=null===(t=e.response)||void 0===t?void 0:t.data.sub_code;(0,em.A)(i(et(a)))}else(0,em.A)(i("Video.error-uploading-audio"))}})}else alert("Please select a valid audio file.")},style:{display:"none"}}),(0,x.jsx)("button",{disabled:s,type:"button",onClick:()=>{var e;null===(e=l.current)||void 0===e||e.click()},className:(0,O.cn)("underline",s&&"opacity-50"),children:i("Video.upload-audio")})]})};var e1=a(33973),e2=a(85727);let e4=e=>{let{cursorPosition:t,transcriptValue:a,setCursorPosition:i,setTranscriptValue:s}=e,{t:r}=(0,T.$G)(),[l,n]=(0,R.useState)(!1),o=e=>{f.iN.elementClicked({action:"video_gen_add_modifier",referrer:"DialogModifierButtons",value:{modifier:e}});let l=t>0&&" "!==a.charAt(t-1)?" ":"",n=t<a.length&&" "!==a.charAt(t)?" ":"",o="".concat(a.slice(0,t)).concat(l,"[|").concat("custom"===e?"":e,"|]").concat(n).concat(a.slice(t));if(o.length>450){(0,em.A)(r("Video.transcript-is-too-long"));return}s(o),i(o.length)};return(0,x.jsxs)("div",{className:"flex flex-row gap-2 flex-wrap",children:[Q.map(e=>(0,x.jsx)(S.zx,{variant:"outline",size:"sm",onPress:()=>o(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e)),(0,x.jsx)(S.zx,{variant:"outline",size:"sm",onPress:()=>o("custom"),children:"+ Custom"},"Custom"),(0,x.jsx)(S.zx,{variant:"outline",isIconOnly:!0,size:"sm",onPress:()=>n(!l),children:l?(0,x.jsx)(e1.Z,{size:"1rem"}):(0,x.jsx)(e2.Z,{size:"1rem"})},"expand-modifiers"),!!l&&J.map(e=>(0,x.jsx)(S.zx,{variant:"outline",size:"sm",onPress:()=>o(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})};var e5=a(47016);let e3=e=>{let{voiceOverData:t,setAudioDuration:a}=e,{t:i}=(0,T.$G)(),[s,r]=(0,R.useState)(!1),l=(0,R.useRef)(null),[n,o]=(0,R.useState)(0),[c,d]=(0,R.useState)(0),u=()=>{l.current&&(l.current.pause(),l.current.currentTime=0),r(!1)};(0,R.useEffect)(()=>{let e=l.current;if(e){let t=()=>{d(e.duration),a(e.duration),f.iN.videoGenSubmittedAudioDuration({duration:e.duration})},i=()=>{o(e.currentTime)};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",i),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",i)}}},[t,l.current]);let m=(0,R.useCallback)(()=>{l.current=(0,e5.Sk)(t,"one-off",{onPlay:()=>{r(!0)},onEnded:()=>{eZ.V.fire(),r(!1)}})},[t]);(0,R.useEffect)(()=>(m(),()=>{u()}),[m]);let h=c>20,g=c<3&&c>0;return(0,x.jsxs)("div",{className:(0,O.cn)("flex flex-row items-center sm:flex-[.8] flex-1",h||g?"items-start":"items-center"),children:[c>0&&(0,x.jsxs)("div",{className:"text-xs mr-2 text-muted-foreground text-end",children:[(0,x.jsxs)("div",{className:"flex flex-row gap-1 justify-end whitespace-nowrap",children:[(0,x.jsx)("div",{children:"".concat((0,O.oO)(null!=n?n:0)," /")}),(0,x.jsx)("div",{className:(0,O.cn)(h&&"text-warning font-bold",g&&"text-error font-bold"),children:(0,O.oO)(null!=c?c:0)})]}),!!h&&(0,x.jsx)("p",{className:"text-warning",children:i("Video.audio-longer-than-0-s-might-get-clipped",{seconds:20})}),!!g&&(0,x.jsx)("p",{className:"text-error",children:i("Video.audio-must-be-longer-than-limit-seconds",{seconds:3})})]}),s?(0,x.jsx)(S.zx,{variant:"ghost",className:"bg-surface-elevation-1",isIconOnly:!0,onPress:u,children:(0,x.jsx)(D.wNq,{className:"size-4"})}):(0,x.jsx)(S.zx,{variant:"ghost",className:"bg-surface-elevation-1",isIconOnly:!0,onPress:()=>{m(),f.iN.elementClicked({action:"video_gen_play_audio",referrer:"PreviewAudioButton"})},children:(0,x.jsx)(D.o1U,{className:"size-4"})})]})},e6=()=>{var e;let{setVoiceUrl:t,voiceUrl:a,setAudioTranscript:i,setAudioDuration:s,selectedVoice:r,setSelectedVoice:l,characterName:n}=ey(),o=(0,R.useRef)(null),[c,d]=(0,R.useState)(0),{t:u}=(0,T.$G)(),[m,h]=(0,R.useState)(0),g=()=>{let e=o.current;e&&h(e.selectionStart)},[p,v]=(0,R.useState)(""),[_,N]=(0,R.useState)(""),[b,w]=(0,R.useState)(!1),[y,A]=(0,R.useState)(!1);eZ.V.useListen(()=>{A(!0)},[]);let C=e=>{V&&(null==r?void 0:r.voiceId)&&(w(!0),f.iN.videoGenAudioThumbFeedback({audio_id:V,sentiment:e?"positive":"negative",transcript:p,voice_id:r.voiceId}))},{token:I}=(0,j.a)(),{mutate:P,data:V,isLoading:k}=ef();(0,R.useEffect)(()=>{V&&(t(V),w(!1),A(!1))},[V,t]);let G=(0,R.useMemo)(()=>p!==_&&_.length>0,[p,_]);return(0,x.jsxs)(eK.ie,{authToken:I,characterId:null,chatId:null,candidateId:null,onRequestVoice:()=>{E.UK.value=!0},children:[(0,x.jsx)(eW.K,{implicitVoiceSearchString:null!=n?n:void 0,selectVoice:(e,t,a)=>{f.iN.elementClicked({action:"video_gen_select_voice",referrer:"VideoDialogPicker",value:{voice_id:e,display_name:null!=a?a:""}}),l({voiceId:e,displayName:null!=a?a:""}),E.UK.value=!1},selectedVoiceId:null==r?void 0:r.voiceId}),(0,x.jsx)("div",{className:"flex flex-row gap-4",children:(0,x.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,x.jsxs)("div",{className:"flex text-md font-medium flex-row justify-between w-full",children:[(0,x.jsx)("span",{children:u("Video.dialogue")}),(0,x.jsx)(e0,{setVoiceUrl:t,onSuccess:()=>{i("")}})]}),(0,x.jsx)("div",{className:"flex flex-row gap-2",children:(0,x.jsxs)(S.zx,{className:"w-full rounded-spacing-s justify-start pl-2 text-muted-foreground py-3",variant:"outline",onPress:()=>{E.UK.value=!0},children:[(0,x.jsx)(D.W1M,{height:"1.25em",className:"ml-1"}),null!==(e=null==r?void 0:r.displayName)&&void 0!==e?e:"Select a voice"]})}),(0,x.jsx)(e4,{cursorPosition:m,transcriptValue:_,setCursorPosition:h,setTranscriptValue:N}),(0,x.jsxs)("div",{className:"border-1 border-input flex flex-col gap-2 px-4 pt-4 pb-2 rounded-spacing-s",children:[(0,x.jsx)(eA.g,{onClick:g,onKeyUp:g,onSelect:g,ref:o,placeholder:e9[c%e9.length],value:_,className:"border-0 py-0 px-0 !rounded-none",maxLength:450,onChange:e=>N(e.target.value)}),(0,x.jsx)("div",{className:"flex flex-row gap-2 justify-between items-center",children:(0,x.jsxs)("p",{className:"text-sm text-muted-foreground",children:[_.length," / ",450]})})]}),(0,x.jsxs)("div",{className:"flex flex-row gap-2 w-full justify-end items-start relative",children:[!!V&&!b&&!!y&&(0,x.jsx)(e$.p,{onThumbUp:()=>C(!0),onThumbDown:()=>C(!1),className:"absolute left-0 hidden sm:block"}),(0,x.jsxs)("div",{className:"flex flex-row gap-2 justify-end",children:[!!a&&(0,x.jsx)(e3,{voiceOverData:a,setAudioDuration:s}),(0,x.jsxs)(S.zx,{variant:G?"primary":"ghost",className:(0,O.cn)({"bg-surface-elevation-1":!G}),isLoading:k,isDisabled:0===_.length&&!!(null==r?void 0:r.voiceId)||k,disableAnimation:!0,disableRipple:!0,onPress:()=>{var e;if(!r){E.UK.value=!0;return}0!==_.length&&(v(_),d(c+1),f.iN.elementClicked({action:"video_gen_generate_audio",referrer:"VideoDialogPicker",value:{voice_id:r.voiceId,transcript_length:_.length}}),P({voiceId:null!==(e=r.voiceId)&&void 0!==e?e:"",text:_},{onSuccess:()=>{i(_)},onError:e=>{if(e instanceof ed.d7){var t;let a=null===(t=e.response)||void 0===t?void 0:t.data.sub_code;(0,em.A)(u(et(a)))}else(0,em.A)(u("Common.something-went-wrong-please-try-again-later"));(0,es.H)("Failed to generate voice over",{error:e})}}))},children:[!(null==r?void 0:r.voiceId)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.uAs,{className:"size-4"}),u("CreateVoice.screen.select-voice-label")]}),!k&&!!V&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.Vk2,{className:"size-4"}),u("Common.regenerate")]}),!k&&!V&&!!(null==r?void 0:r.voiceId)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.uAs,{className:"size-4"}),u("Video.generate-audio")]})]})]})]})]})})]})},e9=(0,V.Sy)(["[|happy|] I just got a puppy and named him Sir Wag-a-lot!","[|pause|] I’m not saying it’s aliens… [|pause|] but it’s aliens.","[|angry|] Who *ate* my leftovers?!","[|custom dramatic|] The toast... was burnt beyond recognition.","[|serious|] We need to talk about your browser history.","[|sad|] He left… and took the cat with him.","[|slow|] This... is... the longest... sentence... ever.","[|exclaim|] I can’t believe we won the cheese-rolling contest!","[|calm|] Let’s all just take a deep breath and pretend this is fine.","[|mutter|] Ugh, why does this always happen to me?","[|soft|] The kitten curled up in my hoodie and started purring.","[|shout|] I SAID DON’T TOUCH THAT BUTTON!","[|command|] Activate the confetti cannons. Now.","[|loud|] THE CAKE IS A LIE!","[|fast|] Iwenttothestoreboughtmilkandcamebackallbeforeyouevenblinked!","[|whisper|] There’s a secret tunnel under the vending machine...","[|quiet|] This part of the forest is where the mushrooms whisper.","[|plead|] Please, just give me five more minutes of sleep."]);var e8=a(2839),e7=a(11493);let te=e=>{let{videoUrl:t,hideAnnotation:a=!1,characterId:i}=e,[s,r]=(0,R.useState)(!1),l=(0,w.useGateValue)(v.m2.AvatarFXShareEnabled),n=(0,w.useLayer)(v.db.ProfileWithFeeds).get(v.sD.EnablePostToFeed,!1),[o,c]=(0,R.useState)(!1);(0,R.useEffect)(()=>{t&&c(!1)},[t]);let d=e=>{t&&(c(!0),f.iN.videoGenThumbFeedback({video_id:t,sentiment:e?"positive":"negative"}))},{mutate:u,isLoading:m}=eN();(0,R.useEffect)(()=>{t&&r(!1)},[t]);let{t:h}=(0,T.$G)(),g=e=>{if(t){let a=ea(t);if(a){let t=ei(a);try{navigator.clipboard.writeText(t),(0,em.K)(h("Common.link-copied-to-clipboard"),5e3),f.iN.elementClicked({referrer:e,action:"video_gen_copy_share_url",option:{videoShareUrl:t}})}catch(e){(0,es.H)("Error copying video share url",{error:e}),(0,em.K)(h("Error.something-went-wrong"),5e3)}}}};return t?(0,x.jsxs)("div",{className:"flex flex-row gap-2 flex-wrap",children:[!!t&&!s&&!!n&&(0,x.jsxs)(S.zx,{variant:"ghost",isLoading:m,isDisabled:m,className:"w-fit border-blue border-1",onPress:()=>{if(t){let e=ea(t);e&&(E.W_.value={videoId:e,videoUrl:t,characterId:i})}},children:[(0,x.jsx)(C.t,{size:"mini",className:"bg-black p-1 rounded-spacing-xxs",props:{width:16},logoClassName:"text-white"}),h("Video.post-to")]}),!!t&&!s&&!!l&&(0,x.jsxs)(S.zx,{variant:"ghost",isLoading:m,isDisabled:m,className:"w-fit bg-surface-elevation-2",onPress:()=>{if(t){let e=ea(t);e&&u(e,{onSuccess:()=>{r(!0),(0,em.K)("Video shared successfully",5e3),g("video_share_button")},onError:e=>{(0,es.H)("Error sharing video",{error:e}),(0,em.K)(h("Error.something-went-wrong"),5e3)}})}},children:[(0,x.jsx)(D.aAc,{className:"size-4"}),h("Common.share")]}),!!s&&!!l&&(0,x.jsxs)(S.zx,{variant:"outline",isLoading:m,isDisabled:m,className:"w-fit group",onPress:()=>g("video_share_button"),children:[(0,x.jsx)(D.gq4,{className:"size-6 visible group-hover:hidden"}),(0,x.jsx)(D.TIy,{className:"size-4 hidden group-hover:block"}),(0,x.jsx)("span",{className:"text-sm visible group-hover:hidden",children:h("Common.shared")}),(0,x.jsx)("span",{className:"text-sm hidden group-hover:block",children:h("Common.copy")})]}),!!t&&(0,x.jsxs)(S.zx,{variant:"ghost",className:"bg-surface-elevation-1 w-fit",onPress:()=>{if(t){f.iN.elementClicked({referrer:"VideoGenerationItem",action:"video_gen_download_video",option:{videoUrl:t}});let e=document.createElement("a");e.href=t,e.target="_blank",e.download="character-avatar-video.mp4",e.click()}},children:[(0,x.jsx)(e7.Z,{className:"size-4"}),h("Common.download")]}),!!t&&!o&&!a&&(0,x.jsx)(e$.p,{onThumbUp:()=>d(!0),onThumbDown:()=>d(!1),className:"mt-2"})]}):null},tt=()=>{let{videoGenStatus:e,videoGenUrl:t,videoGenIsLoading:a,videoGenProgress:i,aspectRatio:s,selectedCharacter:r}=ey(),{t:l}=(0,T.$G)(),n=()=>{switch(e){case er.Yn.QUEUED:return l("Video.hang-tight-weve-got-your-video-in-line-for-processing");case er.Yn.PROCESSING:return(0,x.jsxs)("div",{children:[(0,x.jsx)(eT.j,{phrases:ta,className:"text-muted-foreground text-sm",autoInterval:1e4}),"- ".concat(i?Math.round(100*i):0,"% -")]});case er.Yn.ERRORED:default:return l("Video.your-super-awesome-video-will-show-up-here")}},o=(e,t)=>(0,x.jsxs)("div",{className:"flex flex-col items-center gap-2 p-6",children:[(0,x.jsx)(eL,{intensity:e,className:"w-12 h-12"}),(0,x.jsx)("div",{className:"text-muted-foreground text-sm text-center",children:t})]});return(0,x.jsxs)("div",{className:"flex flex-col gap-2 items-center w-full max-w-lg relative",children:[(0,x.jsxs)("div",{className:"flex justify-center items-center rounded-spacing-s flex-row gap-4 relative overflow-hidden w-full max-w-lg",style:{aspectRatio:null!=s?s:1.7,minWidth:"64px"},children:[(0,x.jsx)("div",{className:(0,O.cn)("absolute bg-surface-elevation-1 opacity-50 z-[2] inset-0",t&&"w-fit")}),(0,x.jsx)("div",{className:"flex flex-col gap-2 items-center justify-center z-[3] w-full h-full",children:e===er.Yn.ERRORED?(0,x.jsx)("div",{className:"text-sm text-center p-6",children:n()}):!a||e||t?e!==er.Yn.PROCESSING&&e!==er.Yn.QUEUED||t?a||t||e?t&&e===er.Yn.COMPLETED?(0,x.jsx)(e8.Y,{src:t,referrer:"video_gen_view"}):null:(0,x.jsxs)("div",{className:"flex flex-col items-center gap-2 p-6",children:[(0,x.jsx)(D.HiY,{className:"size-6 rotate-6"}),(0,x.jsx)("p",{className:"text-muted-foreground text-sm text-center",children:n()})]}):o(null!=i?i:0,n()):o(0,l("Video.starting-magic"))})]}),(0,x.jsx)(te,{videoUrl:t,characterId:null==r?void 0:r.id})]})},ta=(0,V.Sy)(["Reticulating neural aesthetics...","Adjusting the uncanny valley slope...","Teaching AI to blink naturally...","Animating pixels with pure imagination...","Rendering your future viral hit...","Taming rogue frame interpolators...","Aligning vibes per second...","Teaching AI to cry on cue...","Searching for Oscar-worthy keyframes...","Faking it ‘til we make it real...","Negotiating with the timeline...","Compositing dreams...","Motion smoothing without the soap opera effect...","Rendering in 5... 4... please wait...","Warming up generative charisma...","Defibrillating frozen keyframes...","Whispering sweet prompts to the encoder...","Syncing lip movements with cosmic timing...","Stabilizing hyperreality...","Generating the illusion of spontaneity...","Scripting spontaneous genius...","Faking shadows with maximum confidence...","Running from render gremlins...","Resolving conflicts between keyframes...","Wiping lens flares off the timeline...","Auditioning AI extras in the background...","Masking your imperfections with art...","Waiting for inspiration to compile...","Breathing life into static noise...","Practicing dramatic zooms...","Processing pixels like it’s 2099...","Layering digital absurdity...","Simulating awkward pauses...","Unleashing infinite takes per second...","Transcoding reality into spectacle...","Mentoring synthetic actors on method acting...","Polishing reflections in imaginary mirrors...","De-noising the fourth wall...","Teaching AI to deliver punchlines with timing...","Curating frame-by-frame existential crises...","Auto-tuning emotional resonance...","Color grading pure emotion...","Refining speculative cinematography...","Deliberating over shot-reverse-shot philosophy...","Sketching silhouettes in quantum lighting...","Exporting charisma to compressed formats...","Hydrating low-poly character development...","Overclocking dramatic irony...","Training B-roll to roll with it...","Teaching shadows to cast doubts...","Simmering subtext beneath the surface...","Compiling scenes with poetic recursion...","Debugging emotional continuity...","Animating internal monologues externally...","Inferring context from long stares...","Upmixing background tension...","Flashing back to nonexistent memories...","Vignetting the edges of digital nostalgia..."],Date.now()),ti=[{imageUrl:"https://characterai.io/i/400/static/avatar_fx/images/10_lovestruck_duke_closeup_royal_3d.webp",voiceId:"4e9d66b0-e2e3-4f22-b381-d521f11c180a",videoUrl:"https://characterai.io/static/media/landing_s/landing5_s.mp4",name:"Sad Prince"},{imageUrl:"https://characterai.io/i/400/static/avatar_fx/images/9_pharaoh_tutankhamun_closeup_1920s_egypt_cinematic.webp",voiceId:"b01f5f6a-60e9-4387-a921-cef9bdd4e9b7",videoUrl:"https://characterai.io/static/media/landing_s/landing0_s.mp4",name:"Pharaoh"},{imageUrl:"https://characterai.io/i/400/static/avatar_fx/images/13_tanya_mediumclose_city_webtoon.webp",voiceId:"e620ce3a-b47f-4211-a5e4-87bd24849aec",videoUrl:"https://characterai.io/static/media/landing_s/landing6_s.mp4",name:"Anime Girl"}],ts=["Video.grab-an-image","Video.choose-a-voice","Video.write-a-fun-script"],tr=()=>{let{setRemoteImageUrl:e,setSelectedVoice:t,setImageSource:a,setPreviewImageUrl:i,setShowColdStart:s,setViolatingImageUrl:r}=ey(),[l,n]=(0,R.useState)(-1),{t:o}=(0,T.$G)();return(0,x.jsxs)("div",{className:"flex flex-col gap-4 bg-background rounded-sm z-10 p-6 outline outline-1 outline-accent  sm:text-md text-sm",children:[(0,x.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,x.jsx)("h1",{className:"text-xl",children:o("Video.welcome-to-avatarfx")}),(0,x.jsx)(S.zx,{variant:"ghost",size:"sm",isIconOnly:!0,className:"mr-2 h-fit min-w-fit w-fit",onPress:()=>s(!1),children:(0,x.jsx)(D.Two,{height:"1.25em",color:"var(--icon-secondary)"})})]}),(0,x.jsx)("div",{className:"flex flex-row flex-wrap sm:flex-nowrap sm:gap-2 gap-1 items-center",children:ts.map((e,t)=>(0,x.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,x.jsx)("div",{className:"bg-primary text-background rounded-full text-sm p-0 h-4 w-4 flex items-center justify-center",children:t+1}),(0,x.jsx)("div",{className:"sm:mr-3 mr-1",children:o(e)})]},e))}),(0,x.jsx)("div",{children:o("Video.watch-your-images-come-to-life")}),(0,x.jsx)("div",{className:"flex flex-row gap-4",children:ti.map((s,o)=>(0,x.jsx)(tl,{onRemix:()=>{n(-1),e(s.imageUrl),i(s.imageUrl),r(null),a(c.COLD_START_IMAGE),t({voiceId:s.voiceId,displayName:s.name}),f.iN.elementClicked({action:"video_gen_remix_video",referrer:"VideoGeneratorView",value:{videoUrl:s.name}})},url:s.videoUrl,muted:l!==o,setUnMutedIndex:()=>n(o===l?-1:o)},s.videoUrl))})]})},tl=e=>{let{url:t,muted:a,setUnMutedIndex:i,onRemix:s}=e,r=(0,R.useRef)(null),{t:l}=(0,T.$G)();return(0,x.jsxs)("div",{className:(0,O.cn)("relative sm:m-4 m-1 group"),children:[(0,x.jsx)("video",{ref:r,className:"rounded-spacing-s overflow-hidden transition-all duration-500 cursor-pointer",src:t,muted:a,width:200,playsInline:!0,loop:!0,autoPlay:!0,onClick:i,"data-stagger-load":!0,preload:"metadata"}),(0,x.jsx)("button",{onClick:i,type:"button",className:"absolute left-1/2 bottom-1/2 -translate-x-1/2 w-12 h-12 bg-black/30 backdrop-blur-sm rounded-full flex items-center justify-center group-hover:visible invisible ",children:a?(0,x.jsx)(D.IbZ,{className:"w-6 h-6 text-white opacity-80"}):(0,x.jsx)(D.CjM,{className:"w-8 h-8 text-white opacity-80"})}),(0,x.jsxs)("button",{onClick:s,type:"button",className:"absolute text-white left-1/2 bottom-4 -translate-x-1/2 p-2 px-3 outline-1 outline-accent outline  bg-black/30 backdrop-blur-sm rounded-spacing-xs gap-2 text-sm flex items-center justify-center group-hover:visible invisible ",children:[(0,x.jsx)(D.Vk2,{className:"size-3"}),l("Video.remix")]})]})},tn=()=>{let{t:e}=(0,T.$G)(),{data:t}=to(),{videoGenStatus:a,showColdStart:i}=ey();return(0,x.jsxs)("div",{className:"flex flex-col gap-5 justify-center h-full",children:[!!(!a&&i)&&(0,x.jsx)("div",{className:"hidden lg:block",children:(0,x.jsx)(tr,{})}),!!(a&&!i)&&(0,x.jsx)(tt,{}),!!(null==t?void 0:t.history.length)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(eR.Z,{className:"text-muted-foreground text-sm whitespace-pre",children:e("Video.past-avatarfx-creations")}),(0,x.jsx)("div",{className:"flex flex-col gap-10",children:null==t?void 0:t.history.map(e=>(0,x.jsxs)("div",{className:"w-full flex justify-center flex-col gap-2 items-center",children:[(0,x.jsx)(e8.Y,{autoPlay:!1,src:e.video_url,referrer:"video_gen_view"}),(0,x.jsx)(te,{videoUrl:e.video_url,hideAnnotation:!0,characterId:e.character_external_id})]},e.generation_id))})]})]})},to=()=>(0,en.aM)({queryKey:["videoGenerationHistory"],queryFn:()=>(0,el.m)().getVideoGenerationHistory()});var tc=a(55541);let td=()=>{let{t:e}=(0,T.$G)(),{remoteImageUrl:t,voiceUrl:a,imageDescription:i,featureLimit:s,audioDuration:r,imageSource:l,audioTranscript:n,isAudioTooShort:o,isReady:c,selectedCharacter:d,selectedVoice:u,startVideoGeneration:m,videoGenIsLoading:h,videoGenUrl:g,setShowColdStart:p}=ey(),v=(0,en.NL)(),_=(0,R.useCallback)(()=>{t&&a&&i&&!o&&(g&&v.invalidateQueries({queryKey:["videoGenerationHistory"]}),p(!1),f.iN.elementClicked({action:"video_gen_create_video",referrer:"VideoGeneratorView",value:{imageDescription:i,remoteImageUrl:t,voiceUrl:a,audioTranscript:n,imageSource:l,characterId:null==d?void 0:d.id}}),m(i,t,a,n,null==d?void 0:d.id))},[p,t,a,i,o,g,n,l,null==d?void 0:d.id,m,v]),{requirementsString:N,stepsCompleted:j}=(0,R.useMemo)(()=>{if((null==s?void 0:s.count_remaining)===0)return{requirementsString:e("Video.requirements.limit_reached"),stepsCompleted:0};let i=[],l=3;return(!t&&(i.push("image"),l--),!u&&(i.push("voice"),l--),!a&&(i.push("audio"),l--),a&&r<3&&(i.push("longer_audio"),l--),i.length>0)?1===i.length?{requirementsString:e("Video.requirements.single",{requirement:e("Video.requirements.".concat(i[0]))}),stepsCompleted:l}:2===i.length?{requirementsString:e("Video.requirements.two",{first:e("Video.requirements.".concat(i[0])),second:e("Video.requirements.".concat(i[1]))}),stepsCompleted:l}:{requirementsString:e("Video.requirements.multiple",{list:i.slice(0,-1).map(t=>e("Video.requirements.".concat(t))).join(e("Video.delimiter.comma")),last:e("Video.requirements.".concat(i[i.length-1]))}),stepsCompleted:l}:{requirementsString:"",stepsCompleted:l}},[t,a,s,r,u,e]),E=(0,R.useMemo)(()=>(null==s?void 0:s.max_limit)?(0,x.jsxs)("div",{className:"text-sm gap-2 flex flex-row items-center",children:[(0,x.jsx)("span",{children:"•"}),e("Video.numleft-left-today",{num:null==s?void 0:s.count_remaining})]}):null,[s,e]);return(0,x.jsxs)("div",{className:"flex justify-center items-center w-fill left-6 right-6 sm:left-auto sm:right-auto z-50 sm:justify-end sticky bottom-6 sm:relative",children:[!c&&(0,x.jsx)(tc.l,{side:"top",content:N,children:(0,x.jsxs)(S.zx,{className:"w-full text-muted-foreground border-1 border-accent bg-background relative flex",children:[e("Video.create-video"),E,(0,x.jsx)("div",{className:"bottom-0 h-1 labs-gradient-animated rounded-full absolute left-0 transition-width duration-[2000ms]",style:{width:"".concat(j/3*100,"%"),backgroundSize:"200% 100%"}})]})}),!!c&&(0,x.jsxs)(S.zx,{className:"w-full text-white labs-gradient-animated",style:{backgroundSize:"200% 100%"},isDisabled:!t||!a,isLoading:h,onPress:_,children:[e("Video.create-video"),E]})]})};var tu=a(3927);function tm(){let{setPreviewImageUrl:e,setRemoteImageUrl:t,setImageSource:a,setViolatingImageUrl:i}=ey(),s=(0,eu.BF)(E.wj),{t:r}=(0,T.$G)(),{images:l}=ej(),[n,o]=(0,R.useState)(null),d=(0,R.useMemo)(()=>Array.from(new Set(l.map(e=>e.tag))).sort(),[l]);return(0,R.useEffect)(()=>{s&&f.iN.contentViewed({content:"VideoSampleImageDialog",referrer:"VideoGen"})},[s]),(0,x.jsxs)(tu.Vq,{open:!!s,onOpenChange:e=>{e||(E.wj.value=!1)},children:[(0,x.jsx)(tu.t9,{className:"backdrop-blur-none"}),(0,x.jsx)(tu.cZ,{className:"sm:max-w-3xl w-full bg-background",children:(0,x.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center pb-4",children:[(0,x.jsx)("h1",{children:r("Video.try-an-image")}),(0,x.jsx)("div",{className:"text-muted-foreground text-center flex-wrap flex flex-row gap-2",children:d.map(e=>(0,x.jsx)(S.zx,{variant:n===e?"primary":"ghost",className:(0,O.cn)("rounded-spacing-xs capitalize",{"bg-surface-elevation-3":n!==e,"bg-blue text-white":"memes"===e.toLowerCase()&&n!==e}),size:"sm",onPress:()=>{n===e?o(null):o(e),f.iN.elementClicked({target:"VideoSampleImageDialogTag",action:"filter_by_tag",value:e,referrer:"VideoGenSampleImageDialog"})},children:e},e))}),(0,x.jsx)("div",{className:"text-muted-foreground text-center flex-wrap flex flex-row gap-1 max-h-[500px] overflow-y-scroll justify-center items-center",children:l.filter(e=>null===n||e.tag===n).map(s=>(0,x.jsx)(eU(),{src:s.image_url,alt:s.tag,width:170,height:100,className:"rounded-spacing-s cursor-pointer border-3 hover:border-foreground border-transparent",onClick:()=>{o(s.tag),e(s.image_url),t(s.image_url),i(null),a(c.EXAMPLE_IMAGE),f.iN.elementClicked({target:"video-gen-example-image",action:"select_image",value:s.image_url,referrer:"VideoGenSampleImageDialog",option:{tag:s.tag}}),E.wj.value=!1}},s.image_url))})]})})]})}var th=a(9441),tg=a(45736),tx=a(92304);let tf=()=>{let e=(0,th.E)(),t=(0,eu.BF)(eh),a=(0,eu.BF)(eg);return e?(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,x.jsx)(tx._,{children:"Staff Settings"}),(0,x.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,x.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,x.jsx)(tg.X,{checked:t,onCheckedChange:()=>{eh.value=!t}}),(0,x.jsx)(tx._,{children:"VIP Mode"})]}),(0,x.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,x.jsx)(tg.X,{checked:a,onCheckedChange:()=>{eg.value=!a}}),(0,x.jsx)(tx._,{children:"Debug Mode"})]})]})]}):null},tp=()=>{let{t:e}=(0,T.$G)(),{setSelectedCharacter:t,setPreviewImageUrl:a,setImageSource:i,setRemoteImageUrl:s,showColdStart:r,videoGenStatus:l}=ey(),{data:n}=(0,eI.bR)(),o=(0,R.useMemo)(()=>(null==n?void 0:n.filter(e=>e.avatar_file_name).map(e=>{var t;return{id:e.external_id,name:e.participant__name,avatar_file_name:e.avatar_file_name,voice_id:null!==(t=e.voice_id)&&void 0!==t?t:e.default_voice_id}}))||[],[n]);return(0,x.jsxs)("div",{className:"flex flex-col pt-10",children:[(0,x.jsxs)("div",{className:"flex justify-start w-full h-full lg:flex-row flex-col gap-6 lg:items-start items-center",children:[!l&&!!r&&(0,x.jsx)("div",{className:"block lg:hidden",children:(0,x.jsx)(tr,{})}),(0,x.jsxs)("div",{className:"flex-1 gap-8 flex flex-col max-w-lg p-8  bg-background rounded-xl relative z-10 lg:self-start lg:sticky lg:top-20 lg:max-h-[calc(100vh-4rem)] lg:overflow-y-auto",children:[(0,x.jsx)("div",{className:"flex flex-row gap-4",children:(0,x.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,x.jsx)("span",{className:"text-md font-medium",children:e("Video.select-character")}),(0,x.jsx)("div",{className:"flex flex-col gap-1",children:(0,x.jsx)(eV,{placeholder:"My Characters",inputClassName:"text-muted-foreground",className:"bg-background border-1 border-accent",resultContainerStyle:"h-fit max-h-64 mx-10 w-64 bg-surface-elevation-2 w-fill",characters:o,onSelect:e=>{f.iN.elementClicked({action:"video_gen_select_character",referrer:"VideoGeneratorView",value:{characterId:e.id,characterName:e.name}}),i(c.CHARACTER_AVATAR),t(e),s(null),a(V.Wj.getCDNImageSource(e.avatar_file_name,V.t7.LARGE400))}})}),(0,x.jsx)("div",{children:(0,x.jsx)(eR.Z,{className:"text-muted-foreground text-md",children:e("Video.or")})}),(0,x.jsx)(eY,{})]})}),(0,x.jsx)(eC,{}),(0,x.jsx)(eR.Z,{}),(0,x.jsx)(e6,{}),(0,x.jsx)(tf,{}),(0,x.jsx)(td,{})]}),(0,x.jsxs)("div",{className:"flex-1 relative z-0 justify-center items-center flex h-full ml-2xl",children:[(0,x.jsx)(b.d,{blur:75,className:"h-96 w-96 absolute hidden sm:flex"}),(0,x.jsx)(tn,{})]})]}),(0,x.jsx)(tm,{})]})};var tv=a(15030),t_=a(21805);let tN=tv.hl.Keys.AcceptedVideoPolicy,tj=()=>{let[e,t]=(0,R.useState)(!1);return((0,R.useEffect)(()=>{t_.Z.get(tN)||t(!0)},[]),e)?(0,x.jsx)(tE,{onAccept:()=>{t_.Z.set(tN,"true"),f.iN.videoTosAccept(),t(!1)}}):null},tE=e=>{let{onAccept:t}=e,{t:a}=(0,eG.$G)();return(0,x.jsx)(tu.Vq,{open:!0,analyticsProps:{referrer:"ChatVoice",type:"ChatVoiceSelection"},children:(0,x.jsxs)(tu.cZ,{className:"p-6 cursor-default w-full max-w-md",hideClose:!0,children:[(0,x.jsx)(tu.fK,{className:"",children:(0,x.jsxs)("div",{className:"flex flex-row text-center gap-2",children:[(0,x.jsx)("div",{className:"text-medium",children:a("Video.using-avatar-fx",{name:"AvatarFX"})}),(0,x.jsx)(_.o,{trigger:E.c.VideoGen})]})}),(0,x.jsx)(tu.Be,{children:(0,x.jsx)("div",{className:"whitespace-pre-line text-medium",children:(0,x.jsxs)(eG.cC,{i18nKey:"Video.Policy",children:["This tool is for creativity, not chaos. \\n\\nBe kind to your C.ai community. No impersonating people. No bullying. No deepfakes. No use of protected intellectual property without permission.\\n\\nOne strike & you’re out. No appeals. No drama. \\n\\nBy tapping “Agree and Continue”, you consent to the processing of any biometric information or identifiers (learn more). You also agree to use Avatars FX in line with our"," ",(0,x.jsx)("a",{className:"underline",href:tv.Hb.tos,children:"Terms of Service"}),",",(0,x.jsx)("a",{className:"underline",href:tv.Hb.privacyPolicy,children:"Privacy Policy"}),", and",(0,x.jsx)("a",{className:"underline",href:tv.Hb.communityGuidelines,children:"Community Guidelines"}),". And you agree to have fun!"]})})}),(0,x.jsx)("div",{className:"flex justify-between mx-4 my-4",children:(0,x.jsx)(S.zx,{type:"submit",className:"w-full",onPress:t,children:a("VoicePolicy.agree-btn")})})]})})};var tb=a(68159),tw=a(72539),ty=a(38978),tT=a(5192);(s=d||(d={})).USER_PROFILE="social_user_profile_feed",s.CHARACTER_PROFILE="social_character_profile_feed",s.DISCOVERY="recommended",s.SOCIAL="social_feed";let tA={profileFeed:(e,t)=>["feed",e,t],characterProfileFeed:(e,t)=>["feed",e,t]},tC=(e,t)=>{(null==t?void 0:t.username)&&e.invalidateQueries({queryKey:tA.profileFeed(d.USER_PROFILE,t.username)}),(null==t?void 0:t.characterIds)&&t.characterIds.forEach(t=>{e.invalidateQueries({queryKey:tA.characterProfileFeed(d.CHARACTER_PROFILE,t)})})},tI=()=>{let{submitPost:e}=(0,tT.s8)(),t=(0,en.NL)();return(0,en.Db)({mutationFn:t=>{let{request:a}=t;return e(a)},onSuccess:(e,a)=>{let{options:i}=a;tC(t,null==i?void 0:i.invalidateProfileConfig)}})};function tS(){let e=!!(0,eu.BF)(E.W_);return(0,R.useEffect)(()=>{e&&f.iN.contentViewed({content:"PostToFeed",referrer:"VideoGen"})},[e]),(0,x.jsxs)(tu.Vq,{open:!!e,onOpenChange:e=>{e||(E.W_.value=null)},children:[(0,x.jsx)(tu.t9,{className:"backdrop-blur-none"}),(0,x.jsx)(tu.cZ,{className:"sm:max-w-xl w-full bg-background",children:!!e&&(0,x.jsx)(tP,{})})]})}(r=u||(u={}))[r.AUTHOR_TYPE_UNSPECIFIED=0]="AUTHOR_TYPE_UNSPECIFIED",r[r.AUTHOR_TYPE_USER=1]="AUTHOR_TYPE_USER",r[r.AUTHOR_TYPE_BOT=2]="AUTHOR_TYPE_BOT",r[r.UNRECOGNIZED=-1]="UNRECOGNIZED",(l=m||(m={}))[l.POST_TYPE_UNSPECIFIED=0]="POST_TYPE_UNSPECIFIED",l[l.POST_TYPE_TEXT=1]="POST_TYPE_TEXT",l[l.POST_TYPE_IMAGE=2]="POST_TYPE_IMAGE",l[l.POST_TYPE_VIDEO=3]="POST_TYPE_VIDEO",l[l.POST_TYPE_CONVERSATION=4]="POST_TYPE_CONVERSATION",l[l.POST_TYPE_CHARACTER_CARD=5]="POST_TYPE_CHARACTER_CARD",l[l.POST_TYPE_AVATAR=6]="POST_TYPE_AVATAR",l[l.POST_TYPE_ROAST_BATTLE=7]="POST_TYPE_ROAST_BATTLE",l[l.POST_TYPE_SCENE_CARD=8]="POST_TYPE_SCENE_CARD",l[l.POST_TYPE_CHAT_SNIPPET=9]="POST_TYPE_CHAT_SNIPPET",l[l.POST_TYPE_AVATAR_FX=10]="POST_TYPE_AVATAR_FX",l[l.POST_TYPE_CAI_STREAMS=11]="POST_TYPE_CAI_STREAMS",l[l.UNRECOGNIZED=-1]="UNRECOGNIZED",(n=h||(h={}))[n.COMMENT_TYPE_UNSPECIFIED=0]="COMMENT_TYPE_UNSPECIFIED",n[n.COMMENT_TYPE_TEXT=1]="COMMENT_TYPE_TEXT",n[n.COMMENT_TYPE_IMAGE=2]="COMMENT_TYPE_IMAGE",n[n.COMMENT_TYPE_VIDEO=3]="COMMENT_TYPE_VIDEO",n[n.UNRECOGNIZED=-1]="UNRECOGNIZED",(o=g||(g={}))[o.CLIENT_PLATFORM_UNSPECIFIED=0]="CLIENT_PLATFORM_UNSPECIFIED",o[o.CLIENT_PLATFORM_DESKTOP=1]="CLIENT_PLATFORM_DESKTOP",o[o.CLIENT_PLATFORM_MOBILE_WEB=2]="CLIENT_PLATFORM_MOBILE_WEB",o[o.CLIENT_PLATFORM_IOS=3]="CLIENT_PLATFORM_IOS",o[o.CLIENT_PLATFORM_ANDROID=4]="CLIENT_PLATFORM_ANDROID",o[o.UNRECOGNIZED=-1]="UNRECOGNIZED";let tP=()=>{var e,t,a,i,s;let{t:r}=(0,T.$G)(),l=null===(e=(0,eu.BF)(E.W_))||void 0===e?void 0:e.videoId,n=null===(t=(0,eu.BF)(E.W_))||void 0===t?void 0:t.videoUrl,o=null===(a=(0,eu.BF)(E.W_))||void 0===a?void 0:a.characterId,{character:c}=(0,ty.XS)(null!=o?o:""),{user:d}=(0,j.a)(),{mutate:h,isLoading:g,data:p}=tI(),{mutate:v,isLoading:_,data:N}=eN(),[b,w]=(0,R.useState)(""),y=(0,R.useRef)(null);(0,R.useEffect)(()=>()=>{E.W_.value=null},[]),(0,R.useEffect)(()=>{l&&v(l,{onError:e=>{(0,es.H)("Error sharing video to external post",{error:e}),(0,em.K)(r("Error.something-went-wrong"),5e3)}})},[l,r,v]);let A=e=>{if(!l)return;let t=ei(l);try{navigator.clipboard.writeText(t),(0,em.K)(r("Common.link-copied-to-clipboard"),5e3),f.iN.elementClicked({referrer:e,action:"video_gen_copy_share_url",option:{videoShareUrl:t}})}catch(e){(0,es.H)("Error copying video share url",{error:e}),(0,em.K)(r("Error.something-went-wrong"),5e3)}};return(0,x.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center pb-4",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-2 justify-start w-full",children:[(0,x.jsx)("h1",{className:"text-left",children:r("Video.post-video-to-c-ai")}),(0,x.jsx)("div",{className:"text-sm text-muted-foreground text-left",children:r("Video.your-video-will-be-posted-on-your-profile")})]}),(0,x.jsxs)("div",{className:"w-64 h-96 bg-black rounded-sm gap-4 flex flex-col p-6",children:[(0,x.jsx)(C.t,{size:"mini",className:"ml-1"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-14 w-14 rounded-full"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-1 w-48 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-1 w-14 rounded-sm"}),(0,x.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-16 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-12 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-4 rounded-sm"})]}),(0,x.jsxs)("div",{className:"w-full max-h-32 h-32 rounded-sm overflow-hidden justify-center",children:[!!N&&(0,x.jsx)("video",{onContextMenu:e=>e.preventDefault(),src:N,autoPlay:!1,className:"h-full w-full object-contain"}),!N&&(0,x.jsx)("div",{className:"w-full h-full bg-surface-elevation-1 rounded-sm justify-center flex items-center",children:(0,x.jsx)(eJ.$,{})})]}),(0,x.jsxs)("div",{className:"flex flex-row gap-2 justify-between w-full",children:[(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-4 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-4 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-6 w-6 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-4 rounded-sm"}),(0,x.jsx)("div",{className:"bg-surface-elevation-1 h-4 w-4 rounded-sm"})]})]}),(0,x.jsxs)("div",{className:"border-1 border-input flex flex-row gap-2 px-4 pt-4 pb-2 rounded-spacing-s w-full",children:[(0,x.jsx)(tw.a,{name:(null==d?void 0:d.name)||"",size:24,src:null==d?void 0:null===(s=d.user)||void 0===s?void 0:null===(i=s.account)||void 0===i?void 0:i.avatar_file_name,rounded:!0}),(0,x.jsxs)("div",{className:"flex flex-col gap-2 flex-1 w-full",children:[(0,x.jsx)(eA.g,{ref:y,disabled:g||!!p,placeholder:"Say something about your post...",value:b,className:"border-0 py-0 px-0 !rounded-none",maxLength:255,onChange:e=>w(e.target.value)}),(0,x.jsx)("div",{className:"flex flex-row gap-2 justify-end items-center",children:(0,x.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b.length," / ",255]})})]})]}),!!l&&!!N&&(0,x.jsxs)("div",{className:"flex flex-col gap-2 justify-between w-full text-sm text-muted-foreground text-left",children:[(0,x.jsx)("div",{className:"font-bold",children:r("Video.share-link")}),(0,x.jsx)("div",{className:"text-muted-foreground",children:ei(l)})]}),(0,x.jsxs)("div",{className:"flex flex-row gap-2 justify-between w-full",children:[(0,x.jsx)(S.zx,{variant:"outline",isLoading:_,isDisabled:_||!N,onPress:()=>{A("post_to_feed_dialog"),f.iN.elementClicked({referrer:"video_gen_post_to_feed_dialog",action:"video_gen_copy_share_url"})},children:r("Video.copy-share-link")}),(0,x.jsx)(S.zx,{variant:p?"ghost":"primary",isLoading:g,isDisabled:g||!!p,onPress:async()=>{var e;if(!(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.username)||!n||p)return;f.iN.elementClicked({referrer:"video_gen_post_to_feed_dialog",action:"video_gen_post_to_feed",option:{captionLength:b.length}}),f.iN.post({referrer:"PostAvatarFx",action:"create_post",has_caption:!!b,type:m.POST_TYPE_AVATAR_FX});let t=[];c&&t.push({author_type:u.AUTHOR_TYPE_BOT,avatar_url:c.avatar_file_name,id:c.external_id,name:c.participant__name}),await h({request:{post_type:m.POST_TYPE_AVATAR_FX,author_type:u.AUTHOR_TYPE_USER,media_urls:[n],caption:b,participants:t}},{onError:e=>{(0,es.H)("Error submitting post",{error:e})}})},children:p?r("Video.posted-to-c-ai"):r("Video.post-to-feed")})]})]})},tO=()=>((0,p.Xu)("VideoGen"),(0,x.jsx)(ew,{children:(0,x.jsxs)("div",{className:"flex flex-col gap-4 p-6 bg-surface h-full",children:[(0,x.jsx)(q,{}),(0,x.jsxs)("div",{className:"flex flex-row gap-2 items-end lg:fixed relative",children:[(0,x.jsx)(W.Z,{href:"/",analytics:{name:"linkOpened",properties:{referrer:"video-gen-logo"}},children:(0,x.jsx)(C.t,{size:"regular"})}),(0,x.jsx)(P.l,{}),(0,x.jsx)(_.o,{trigger:E.c.VideoGen})]}),(0,x.jsx)(tp,{}),(0,x.jsx)(tj,{}),(0,x.jsx)(tS,{}),(0,x.jsx)(tb.b,{}),(0,x.jsx)(I.U,{className:"right-3 absolute z-50 bottom-3"}),(0,x.jsx)("div",{className:"fixed top-2 right-6",children:(0,x.jsx)(A.r,{})})]})}));var tV=!0;let tR="experimental-edge",tk=e=>{let{extraProps:t}=e;return t.accessEnabled?(0,x.jsx)(tO,{}):(0,x.jsx)(K,{})};tk.getLayout=function(e){return e},tk.hideGuide=!0,tk.SignedOut=K;var tD=tk},6553:function(e,t,a){"use strict";a.d(t,{k:function(){return r}});var i=a(74272),s=a.n(i);let r=e=>{let t=s()(e);if(!t)throw Error("Failed to parse data url: ".concat(e));return new Blob([t.toBuffer()],{type:t.contentType})}},27909:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var i=a(52322),s=a(93326),r=a(92599),l=a(61676);let n=e=>{let{selected:t,onThumbUp:a,onThumbDown:n,className:o}=e,c="up"===t,d="down"===t;return(0,i.jsxs)("div",{className:(0,l.cn)("flex h-6 items-center",o),children:[(0,i.jsx)(s.zx,{variant:"ghost",isIconOnly:!0,className:"hover:bg-inherit opacity-100",onPress:a,isDisabled:c,children:c?(0,i.jsx)(r.eLy,{height:16}):(0,i.jsx)(r.lbB,{height:16})}),(0,i.jsx)(s.zx,{variant:"ghost",isIconOnly:!0,className:"hover:bg-inherit opacity-100",onPress:n,isDisabled:d,children:d?(0,i.jsx)(r.C$L,{height:16}):(0,i.jsx)(r.kZ9,{height:16})})]})}}},function(e){e.O(0,[2976,2740,4333,7378,8361,5816,2888,9774,179],function(){return e(e.s=53527)}),_N_E=e.O()}]);